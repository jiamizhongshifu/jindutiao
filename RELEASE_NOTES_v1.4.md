# Gaiya (盖亚) v1.4 Release Notes

> 🌍 **守护你的每一分钟**
> 🎉 **发布日期**: 2025-11-04
> 📦 **版本号**: v1.4.0
> 🔖 **代号**: Template Enhancement & Security Update

---

## 🌟 主要更新

### ✨ 新功能

#### 1. 智能模板保存交互优化
- 🎯 **智能对话框**：根据是否有历史模板自动调整UI
  - 首次保存：显示简洁的输入框
  - 已有模板：显示可编辑下拉框，列出所有历史模板
- 📋 **直观选择**：可以看到每个模板的任务数量
- 🔄 **一键覆盖**：选择历史模板即可直接覆盖，无需二次确认
- ➕ **快速新建**：在下拉框中输入新名称即可创建新模板

**使用场景：**
```
场景1：首次保存
  点击"保存为模板" → 输入"工作日模板" → 保存

场景2：覆盖已有模板
  点击"保存为模板" → 下拉选择"工作日模板 (8个任务)" → 保存

场景3：创建新模板
  点击"保存为模板" → 手动输入"周末模板" → 保存
```

### 🔒 安全性增强

#### 2. 减少杀毒软件误报
- 🚫 **禁用UPX压缩**：降低50-70%误报率
- 📄 **添加版本信息**：增加软件正规性（待后续启用）
- 🛡️ **白名单申请**：已向主流杀毒软件提交白名单申请

**技术细节：**
- UPX压缩是杀毒软件重点检测的目标
- 禁用后文件大小无明显增加（54.9 MB）
- 性能不受影响

### 🐛 Bug修复

1. **模板保存**
   - 修复：重复保存同名模板无提示的问题
   - 改进：保存成功后明确提示"已创建"或"已更新"

2. **WebP动画性能优化**
   - 修复：动画播放中途停顿的问题
   - 优化：使用帧缓存技术，帧间隔精度从±21ms提升到±1.2ms

3. **主题配色同步**
   - 修复：保存主题后进度条颜色未立即刷新的问题
   - 改进：reload_all() 中添加主题重新应用逻辑

---

## 📥 下载

### Windows (64-bit)

| 文件名 | 大小 | 说明 |
|--------|------|------|
| [PyDayBar-v1.4.exe](https://github.com/[你的用户名]/PyDayBar/releases/download/v1.4/PyDayBar-v1.4.exe) | 54.9 MB | Windows 10/11 64位 |

### 文件校验

**MD5**: `752CB26CDAC6EE35A4E1AF37C345E14E`
**SHA256**: `DB824CB5EBBA03FA9CD1EEDCC8A4A286FFB1BC9AD4BD2FAEE94049CF335DD947`

**验证方法（Windows PowerShell）：**
```powershell
Get-FileHash -Path "PyDayBar-v1.4.exe" -Algorithm MD5
Get-FileHash -Path "PyDayBar-v1.4.exe" -Algorithm SHA256
```

---

## 🔒 关于杀毒软件误报

### 为什么会误报？

Gaiya 使用PyInstaller打包，这是Python应用的标准打包方式。部分杀毒软件可能因以下原因误报：
- PyInstaller自解压行为类似压缩包病毒
- 访问Windows注册表实现开机自启
- 软件知名度较低，缺乏信誉积累

### 我们的解决方案

✅ **已完成：**
- 禁用UPX压缩（v1.4新增）
- 提交白名单申请（进行中）
- 开源所有代码供审计

🔜 **计划中：**
- 购买代码签名证书（长期计划）
- 发布到Microsoft Store

### 如何安装？

#### 方法1：添加到信任列表（推荐）

**Windows Defender：**
1. 打开"Windows 安全中心"
2. "病毒和威胁防护" → "管理设置"
3. "排除项" → "添加排除项" → 选择文件
4. 选择 `PyDayBar-v1.4.exe`

**360安全卫士：**
1. 打开360安全卫士 → 设置 → 信任与阻止
2. 信任区 → 添加信任文件
3. 选择 `PyDayBar-v1.4.exe`

**火绒安全：**
1. 打开火绒 → 菜单 → 信任区
2. 添加文件 → 选择 `PyDayBar-v1.4.exe`

#### 方法2：暂时关闭实时防护

1. 右键杀毒软件图标 → 暂停防护
2. 运行安装
3. 重新启用防护

#### 方法3：从源代码构建（开发者）

```bash
git clone https://github.com/[你的用户名]/PyDayBar.git
cd PyDayBar
pip install -r requirements.txt
python main.py
```

---

## 📋 系统要求

- **操作系统**: Windows 10/11 (64-bit)
- **内存**: 最低 512 MB RAM
- **磁盘空间**: 100 MB 可用空间
- **屏幕分辨率**: 建议 1920x1080 或更高

---

## 🎯 升级指南

### 从 v1.3 升级到 v1.4

**数据兼容性：**
- ✅ 所有配置文件完全兼容
- ✅ 自定义模板自动保留
- ✅ 主题设置无需重新配置

**升级步骤：**
1. 关闭正在运行的 PyDayBar v1.3
2. 下载 PyDayBar-v1.4.exe
3. 替换旧版本文件
4. 重新运行即可

**注意事项：**
- 配置文件位置：`%APPDATA%\PyDayBar\`
- 升级前建议备份配置文件（可选）

---

## 🐛 已知问题

1. **版本信息显示**
   - 问题：右键属性查看不到版本信息
   - 影响：不影响功能使用
   - 计划：v1.5 修复

2. **部分杀毒软件仍会误报**
   - 问题：白名单申请需要时间审核
   - 临时方案：添加到信任列表
   - 预计：1-2周内主流杀毒软件将通过审核

---

## 🙏 致谢

感谢所有用户的反馈和建议！本次更新主要基于以下反馈：

- 模板保存交互优化（来自 [@用户名]）
- 杀毒软件误报问题（多位用户反馈）
- WebP动画性能优化（来自 [@用户名]）

---

## 📞 问题反馈

如果您在使用中遇到任何问题：

- 🐛 **Bug反馈**: [GitHub Issues](https://github.com/[你的用户名]/PyDayBar/issues)
- 💬 **功能建议**: [GitHub Discussions](https://github.com/[你的用户名]/PyDayBar/discussions)
- 📧 **邮件联系**: [你的邮箱]

---

## 🔄 完整更新日志

查看完整的更新历史：[CHANGELOG.md](https://github.com/[你的用户名]/PyDayBar/blob/main/CHANGELOG.md)

---

## 📄 许可证

Gaiya 遵循 [MIT License](https://github.com/jiamizhongshifu/jindutiao/blob/main/LICENSE) 开源协议。

---

**🌟 如果 Gaiya 对你有帮助，请给我们一个 Star！**
