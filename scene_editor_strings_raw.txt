ä» scene_editor.py ä¸­æå–åˆ° 551 ä¸ªå”¯ä¸€çš„ä¸­æ–‡å­—ç¬¦ä¸²
- UIå¯è§å­—ç¬¦ä¸²: 397 ä¸ª
- æ–‡æ¡£å­—ç¬¦ä¸²: 138 ä¸ª
- æ—¥å¿—å­—ç¬¦ä¸²: 16 ä¸ª
- å…¶ä»–å­—ç¬¦ä¸²: 0 ä¸ª

================================================================================

=== æ‰€æœ‰å­—ç¬¦ä¸²ï¼ˆæŒ‰å‡ºç°é¡ºåºï¼‰===

1. (Line 0) 
GaiYaåœºæ™¯ç¼–è¾‘å™¨ - å¯è§†åŒ–åœºæ™¯è®¾è®¡å·¥å…·

åŠŸèƒ½ï¼š
- æ‹–æ‹½å¼åœºæ™¯å…ƒç´ æ‘†æ”¾
- å®æ—¶é¢„è§ˆåœºæ™¯æ•ˆæœ
- åœºæ™¯é…ç½®å¯¼å‡ºï¼ˆJSONï¼‰
- ç´ æåº“ç®¡ç†

åˆ›...
2. (Line 0) 

import sys
import os
import json
import logging
from pathlib import Path
fr...
3. (Line 43) äº‹ä»¶åŠ¨ä½œ
4. (Line 0) 
    type: str  # show_tooltip, show_dialog, open_url
    params: Dict[str, s...
5. (Line 38) äº‹ä»¶é…ç½®
6. (Line 54) è½¬æ¢ä¸ºå­—å…¸
7. (Line 0) : self.action.params
            }
        }


# ============================...
8. (Line 69) æ·»åŠ å…ƒç´ å‘½ä»¤
9. (Line 69) æ·»åŠ å…ƒç´ 
10. (Line 77) é‡åšï¼šæ·»åŠ å…ƒç´ 
11. (Line 0) 
        if self.item not in self.canvas.scene_items:
            self.canvas...
12. (Line 85) æ’¤é”€ï¼šç§»é™¤å…ƒç´ 
13. (Line 0) 
        self.canvas.scene.removeItem(self.item)
        if self.item in self...
14. (Line 94) ç§»åŠ¨å…ƒç´ å‘½ä»¤
15. (Line 94) ç§»åŠ¨å…ƒç´ 
16. (Line 103) é‡åšï¼šç§»åŠ¨åˆ°æ–°ä½ç½®
17. (Line 109) æ’¤é”€ï¼šæ¢å¤åˆ°æ—§ä½ç½®
18. (Line 116) å¤šé€‰ç§»åŠ¨å‘½ä»¤
19. (Line 0) 
        åˆå§‹åŒ–å¤šé€‰ç§»åŠ¨å‘½ä»¤

        Args:
            items_moves: åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯(item, old...
20. (Line 125) ç§»åŠ¨ {len(items_moves)} ä¸ªå…ƒç´ 
21. (Line 129) é‡åšï¼šç§»åŠ¨æ‰€æœ‰å…ƒç´ åˆ°æ–°ä½ç½®
22. (Line 136) æ’¤é”€ï¼šæ¢å¤æ‰€æœ‰å…ƒç´ åˆ°æ—§ä½ç½®
23. (Line 144) ç¼©æ”¾å…ƒç´ å‘½ä»¤
24. (Line 144) ç¼©æ”¾å…ƒç´ 
25. (Line 153) é‡åšï¼šç¼©æ”¾åˆ°æ–°æ¯”ä¾‹
26. (Line 158) æ’¤é”€ï¼šæ¢å¤åˆ°æ—§æ¯”ä¾‹
27. (Line 0) 
        self.item.setScale(self.old_scale)
        self.item.scale_factor = ...
28. (Line 164) äº‹ä»¶é…ç½®å¯¹è¯æ¡†
29. (Line 173) é…ç½®äº‹ä»¶
30. (Line 179) è§¦å‘å™¨
31. (Line 185) on_hover - é¼ æ ‡æ‚¬åœ
32. (Line 186) on_click - é¼ æ ‡ç‚¹å‡»
33. (Line 187) on_time_reach - æ—¶é—´åˆ°è¾¾
34. (Line 188) on_progress_range - è¿›åº¦èŒƒå›´
35. (Line 189) on_task_start - ä»»åŠ¡å¼€å§‹
36. (Line 190) on_task_end - ä»»åŠ¡ç»“æŸ
37. (Line 192) è§¦å‘ç±»å‹:
38. (Line 43) åŠ¨ä½œ
39. (Line 202) show_tooltip - æ˜¾ç¤ºæç¤º
40. (Line 203) show_dialog - æ˜¾ç¤ºå¯¹è¯æ¡†
41. (Line 204) open_url - æ‰“å¼€é“¾æ¥
42. (Line 207) åŠ¨ä½œç±»å‹:
43. (Line 45) å‚æ•°
44. (Line 216) æ–‡æœ¬å†…å®¹:
45. (Line 221) URLåœ°å€:
46. (Line 226) ä¾‹å¦‚: 09:00 æˆ– 50%
47. (Line 227) æ—¶é—´:
48. (Line 232) ä¾‹å¦‚: 0 (è¡¨ç¤º0%)
49. (Line 233) èµ·å§‹ç™¾åˆ†æ¯”:
50. (Line 237) ä¾‹å¦‚: 50 (è¡¨ç¤º50%)
51. (Line 238) ç»“æŸç™¾åˆ†æ¯”:
52. (Line 243) ä¾‹å¦‚: 0 (è¡¨ç¤ºç¬¬ä¸€ä¸ªä»»åŠ¡)
53. (Line 244) ä»»åŠ¡ç´¢å¼•:
54. (Line 269) åŠ¨ä½œç±»å‹æ”¹å˜
55. (Line 0) )[0]

        # æ ¹æ®åŠ¨ä½œç±»å‹æ˜¾ç¤º/éšè—å‚æ•°
        if action_type == 
56. (Line 281) è§¦å‘å™¨ç±»å‹æ”¹å˜
57. (Line 0) )[0]

        # æ ¹æ®è§¦å‘å™¨ç±»å‹æ˜¾ç¤º/éšè—å‚æ•°
        self.time_input.setVisible(trigger == 
58. (Line 291) åŠ è½½å·²æœ‰é…ç½®
59. (Line 0) 
        # è®¾ç½®è§¦å‘å™¨
        for i in range(self.trigger_combo.count()):
        ...
60. (Line 0) ])

        # è®¾ç½®è§¦å‘å™¨å‚æ•°
        if hasattr(config, 
61. (Line 322) è·å–é…ç½®çš„äº‹ä»¶
62. (Line 0) )[0]

        # æ„å»ºåŠ¨ä½œå‚æ•°å­—å…¸
        params = {}

        if action_type == 
63. (Line 0) ] = self.time_input.text()

        # æ„å»ºè§¦å‘å™¨å‚æ•°å­—å…¸
        trigger_params = {}

...
64. (Line 0) ] = 0

        action = EventAction(type=action_type, params=params)
        ...
65. (Line 363) åœºæ™¯å…ƒç´ å›¾å½¢å¯¹è±¡
66. (Line 0) 

    def __init__(self, image_path: str, item_id: str, canvas=None):
       ...
67. (Line 395) å…ƒç´ å˜åŒ–æ—¶çš„å›è°ƒ
68. (Line 0) 
        if change == QGraphicsItem.ItemPositionChange and self.canvas:
     ...
69. (Line 447) è‡ªå®šä¹‰ç»˜åˆ¶ï¼ˆæ·»åŠ é€‰ä¸­è¾¹æ¡†ï¼‰
70. (Line 0) 
        super().paint(painter, option, widget)

        # å¦‚æœè¢«é€‰ä¸­ï¼Œç»˜åˆ¶è¾¹æ¡†
       ...
71. (Line 457) é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶ - è®°å½•æ‹–åŠ¨å¼€å§‹ä½ç½®ï¼ˆåŒ…æ‹¬å¤šé€‰ï¼‰
72. (Line 0) 
        # è®°å½•å½“å‰itemçš„èµ·å§‹ä½ç½®
        self._drag_start_pos = self.pos()

        #...
73. (Line 474) é¼ æ ‡é‡Šæ”¾äº‹ä»¶ - åˆ›å»ºæ’¤é”€å‘½ä»¤ï¼ˆæ”¯æŒå¤šé€‰ï¼‰
74. (Line 0) 
        super().mouseReleaseEvent(event)

        if not self.canvas or not ...
75. (Line 0) ) and self._multi_drag_start_positions:
            # å¤šé€‰ç§»åŠ¨ï¼šæ”¶é›†æ‰€æœ‰ç§»åŠ¨çš„items
     ...
76. (Line 506) å¯¼å‡ºä¸ºé…ç½®å­—å…¸
77. (Line 0) : self.x_percent * 100,  # è½¬æ¢ä¸º0-100èŒƒå›´ï¼ˆå†…éƒ¨æ˜¯0-1ï¼‰
                
78. (Line 521) åœºæ™¯ç”»å¸ƒè§†å›¾
79. (Line 0) 

    item_selected = Signal(SceneItemGraphics)  # å…ƒç´ é€‰ä¸­ä¿¡å·
    road_layer_sele...
80. (Line 608) åœºæ™¯é€‰ä¸­é¡¹æ”¹å˜æ—¶è§¦å‘
81. (Line 0) 
        selected_items = self.scene.selectedItems()
        if selected_item...
82. (Line 622) è®¾ç½®é“è·¯å±‚å›¾ç‰‡
83. (Line 0) 
        self.road_image_path = image_path
        pixmap = QPixmap(image_pat...
84. (Line 635) åˆ›å»ºå¹³é“ºçš„é“è·¯å›¾ç‰‡
85. (Line 0) 
        if not self.road_pixmap:
            return QPixmap()

        # åº”ç”¨ç¼©...
86. (Line 689) æ›´æ–°é“è·¯å±‚ï¼ˆåç§»æˆ–ç¼©æ”¾æ”¹å˜æ—¶è°ƒç”¨ï¼‰
87. (Line 0) 
        if not self.road_item or not self.road_pixmap:
            return

 ...
88. (Line 552) ç»˜åˆ¶èƒŒæ™¯ç½‘æ ¼
89. (Line 0) 
        super().drawBackground(painter, rect)

        # ç»˜åˆ¶ç½‘æ ¼
        if sel...
90. (Line 729) ç»˜åˆ¶å‰æ™¯ï¼ˆåŒ…æ‹¬å®‰å…¨åŒºåŸŸè’™ç‰ˆï¼‰
91. (Line 0) 
        super().drawForeground(painter, rect)

        # ç»˜åˆ¶å®‰å…¨åŒºåŸŸè’™ç‰ˆ
        if...
92. (Line 810) åˆ‡æ¢å®‰å…¨åŒºåŸŸè’™ç‰ˆæ˜¾ç¤º
93. (Line 0) 
        self.show_safe_area_mask = enabled
        self.viewport().update() ...
94. (Line 0) æ£€æµ‹å…ƒç´ å¯¹é½å…³ç³»å¹¶è¿”å›å¸é™„åçš„ä½ç½®å’Œè¾…åŠ©çº¿

        Args:
            moving_item: æ­£åœ¨ç§»åŠ¨çš„å…ƒç´ 
       ...
95. (Line 0) 
        SNAP_THRESHOLD = 10  # å¸é™„é˜ˆå€¼ï¼ˆåƒç´ ï¼‰

        aligned_x = None
        al...
96. (Line 927) æ·»åŠ åœºæ™¯å…ƒç´ åˆ°ç”»å¸ƒ
97. (Line 0) 
        # ç”Ÿæˆå”¯ä¸€ID
        item_id = f
98. (Line 0) 

        # åˆ›å»ºå›¾å½¢å¯¹è±¡ï¼Œä¼ é€’canvaså¼•ç”¨
        item = SceneItemGraphics(image_path, it...
99. (Line 959) å¤åˆ¶é€‰ä¸­çš„å…ƒç´ åˆ°å‰ªè´´æ¿
100. (Line 0) 
        selected_items = [item for item in self.scene.selectedItems() if isi...
101. (Line 984) ç²˜è´´å‰ªè´´æ¿ä¸­çš„å…ƒç´ 
102. (Line 0) 
        if not self.clipboard_items:
            return

        # æ¸…é™¤å½“å‰é€‰ä¸­
  ...
103. (Line 0) ] + offset_y

            # åˆ›å»ºæ–°å…ƒç´ 
            new_item = self.add_scene_item(...
104. (Line 0) ],
                new_x,
                new_y,
                use_undo=Tru...
105. (Line 0) ])

            # æ¢å¤äº‹ä»¶é…ç½®
            new_item.events = [
                Even...
106. (Line 0) ]
            ]

            # é€‰ä¸­æ–°å…ƒç´ 
            new_item.setSelected(True)

...
107. (Line 1025) åˆ é™¤é€‰ä¸­çš„å…ƒç´ 
108. (Line 0) 
        selected_items = [item for item in self.scene.selectedItems() if isi...
109. (Line 1044) æ¥å—æ‹–æ‹½
110. (Line 0) 
        # æ¥å—ä»ç´ æåº“çš„æ‹–æ‹½æˆ–æ–‡ä»¶ç®¡ç†å™¨çš„æ‹–æ‹½
        if event.mimeData().hasUrls() or event....
111. (Line 1050) æ‹–æ‹½ç§»åŠ¨
112. (Line 1054) å¤„ç†æ‹–æ‹½æ”¾ä¸‹
113. (Line 0) 
        file_path = None
        is_road_layer = False  # æ˜¯å¦æ¥è‡ªé“è·¯å±‚åˆ—è¡¨

       ...
114. (Line 0) 

        # å¦‚æœä¸æ˜¯ä»QListWidgetï¼Œæ£€æŸ¥æ˜¯å¦ä»æ–‡ä»¶ç®¡ç†å™¨æ‹–æ‹½
        elif event.mimeData().hasUr...
115. (Line 0) ):
            if is_road_layer:
                # è®¾ç½®ä¸ºé“è·¯èƒŒæ™¯
                se...
116. (Line 1089) é¼ æ ‡ç‚¹å‡»äº‹ä»¶
117. (Line 0) 
        super().mousePressEvent(event)

        # è·å–ç‚¹å‡»ä½ç½®çš„å…ƒç´ 
        item = s...
118. (Line 1101) é¼ æ ‡é‡Šæ”¾äº‹ä»¶ï¼ˆæ‹–åŠ¨ç»“æŸï¼‰
119. (Line 0) 
        super().mouseReleaseEvent(event)

        # å¦‚æœæ‹–åŠ¨çš„æ˜¯é“è·¯å±‚ï¼ŒåŒæ­¥æ›´æ–°offsetå€¼å¹¶åˆ·æ–°...
120. (Line 1114) çª—å£å¤§å°æ”¹å˜æ—¶çš„å¤„ç†
121. (Line 0) 
        super().resizeEvent(event)
        # ä¸è‡ªåŠ¨ fit_scene_in_viewï¼Œä¿æŒå½“å‰ç¼©æ”¾

 ...
122. (Line 1119) é¦–æ¬¡æ˜¾ç¤ºæ—¶çš„å¤„ç†
123. (Line 0) 
        super().showEvent(event)
        # ä¸è‡ªåŠ¨ fit_scene_in_viewï¼Œä¿æŒå½“å‰ç¼©æ”¾ï¼ˆé»˜è®¤10...
124. (Line 1124) è®¡ç®—é€‚åº”çª—å£çš„ç¼©æ”¾æ¯”ä¾‹å¹¶åº”ç”¨
125. (Line 0) 
        if self.scene:
            # è·å–åœºæ™¯çŸ©å½¢å’Œè§†å£å¤§å°
            scene_rect = se...
126. (Line 1145) è®¾ç½®å½“å‰è¿›åº¦(0.0-1.0)
127. (Line 0) 
        self.current_progress = max(0.0, min(1.0, progress))
        self.vi...
128. (Line 1150) å¼€å§‹æ’­æ”¾é¢„è§ˆ
129. (Line 0) 
        self.is_playing = True

        # åˆ›å»ºå®šæ—¶å™¨
        if not self.play_tim...
130. (Line 1164) æš‚åœæ’­æ”¾é¢„è§ˆ
131. (Line 1170) é‡ç½®é¢„è§ˆåˆ°èµ·ç‚¹
132. (Line 1175) è®¾ç½®æ’­æ”¾é€Ÿåº¦
133. (Line 0) 
        self.play_speed = speed
        # å¦‚æœæ­£åœ¨æ’­æ”¾ï¼Œæ›´æ–°å®šæ—¶å™¨é—´éš”
        if self.is_...
134. (Line 1183) å‰è¿›è¿›åº¦ï¼ˆæ’­æ”¾æ—¶è°ƒç”¨ï¼‰
135. (Line 0) 
        # æ¯æ¬¡å‰è¿›1%
        new_progress = self.current_progress + 0.01

      ...
136. (Line 1194) å¤„ç†é¼ æ ‡æ»šè½®äº‹ä»¶ - Ctrl+æ»šè½®ç¼©æ”¾
137. (Line 0) 
        if event.modifiers() == Qt.ControlModifier:
            # Ctrl+æ»šè½®ï¼šç¼©æ”¾...
138. (Line 1210) å¤„ç†é”®ç›˜æŒ‰ä¸‹äº‹ä»¶ - ç©ºæ ¼é”®å¯ç”¨æ‹–åŠ¨æ¨¡å¼
139. (Line 0) 
        if event.key() == Qt.Key_Space and not event.isAutoRepeat():
       ...
140. (Line 1225) å¤„ç†é”®ç›˜é‡Šæ”¾äº‹ä»¶ - ç©ºæ ¼é”®æ¢å¤åŸæ¨¡å¼
141. (Line 0) 
        if event.key() == Qt.Key_Space and not event.isAutoRepeat():
       ...
142. (Line 1238) è®¾ç½®ç¼©æ”¾çº§åˆ«ï¼ˆç™¾åˆ†æ¯”ï¼‰
143. (Line 0) 
        # é™åˆ¶åœ¨èŒƒå›´å†…
        zoom_percent = max(self.min_zoom, min(self.max_zoom...
144. (Line 1256) æ”¾å¤§ï¼ˆæ¯æ¬¡å¢åŠ 10%ï¼‰
145. (Line 1261) ç¼©å°ï¼ˆæ¯æ¬¡å‡å°‘10%ï¼‰
146. (Line 1266) é€‚åº”çª—å£ï¼ˆè®¡ç®—åˆé€‚çš„ç¼©æ”¾æ¯”ä¾‹ï¼‰
147. (Line 0) 
        # è°ƒç”¨ fit_scene_in_view è®¡ç®—å¹¶åº”ç”¨é€‚åˆçš„ç¼©æ”¾
        self.fit_scene_in_view()
 ...
148. (Line 1273) æ ¹æ®ç¼©æ”¾çº§åˆ«æ›´æ–°æ»šåŠ¨æ¡ç­–ç•¥
149. (Line 0) 
        if self.current_zoom > 100:
            # ç¼©æ”¾å¤§äº100%æ—¶æ˜¾ç¤ºæ»šåŠ¨æ¡
           ...
150. (Line 1285) å°åœ°å›¾ç»„ä»¶ - æ˜¾ç¤ºåœºæ™¯ç¼©ç•¥å›¾å’Œå¯è§†åŒºåŸŸ
151. (Line 0) , parent=None):
        super().__init__(parent)
        self.canvas = canvas...
152. (Line 1307) ç»˜åˆ¶å°åœ°å›¾
153. (Line 0) 
        super().paintEvent(event)

        if not self.canvas:
            r...
154. (Line 1364) ç‚¹å‡»å°åœ°å›¾è·³è½¬åˆ°å¯¹åº”ä½ç½®
155. (Line 0) 
        if not self.canvas or event.button() != Qt.LeftButton:
            r...
156. (Line 1399) ç´ æåº“é¢æ¿
157. (Line 0) 

    def __init__(self, parent=None):
        super().__init__(parent)

    ...
158. (Line 0) )
        layout.addWidget(title)

        # é“è·¯å±‚åˆ†ç»„
        road_group = QGrou...
159. (Line 0) )
        road_layout = QVBoxLayout(road_group)
        self.road_list = QLis...
160. (Line 0) )
        road_upload_btn.clicked.connect(self.import_road_asset)
        roa...
161. (Line 0) )
        road_load_btn.clicked.connect(self.load_selected_road)
        road...
162. (Line 0) )
        scene_layout = QVBoxLayout(scene_group)
        self.scene_list = Q...
163. (Line 0) )
        scene_upload_btn.clicked.connect(self.import_scene_asset)
        s...
164. (Line 0) )
        scene_load_btn.clicked.connect(self.load_selected_scene)
        sc...
165. (Line 1462) åŠ è½½é»˜è®¤ç´ æåº“ï¼ˆscenes/default/assets/ç›®å½•ï¼‰
166. (Line 0) 
        import os
        import sys
        from pathlib import Path

     ...
167. (Line 0) , False):
            # PyInstaller æ‰“åŒ…ç¯å¢ƒï¼šèµ„æºåœ¨ _MEIPASS ä¸´æ—¶ç›®å½•
            base_d...
168. (Line 1472) [ç´ æåº“] æ‰“åŒ…ç¯å¢ƒï¼Œç´ æç›®å½•: {default_assets_dir}
169. (Line 1476) [ç´ æåº“] å¼€å‘ç¯å¢ƒï¼Œç´ æç›®å½•: {default_assets_dir}
170. (Line 1479) [ç´ æåº“] é»˜è®¤ç´ æç›®å½•ä¸å­˜åœ¨: {default_assets_dir}
171. (Line 1484) [ç´ æåº“] æ‰¾åˆ° {len(asset_files)} ä¸ªPNGç´ ææ–‡ä»¶
172. (Line 0)  å…³é”®è¯
            if 
173. (Line 1493) [ç´ æåº“] æ·»åŠ é“è·¯å±‚ç´ æ: {asset_file.name}
174. (Line 1496) [ç´ æåº“] æ·»åŠ åœºæ™¯å±‚ç´ æ: {asset_file.name}
175. (Line 1498) [ç´ æåº“] ç´ æåŠ è½½å®Œæˆï¼é“è·¯å±‚: {self.road_list.count()} ä¸ªï¼Œåœºæ™¯å±‚: {self.scene_list.count()} ä¸ª
176. (Line 1501) å¯¼å…¥é“è·¯å±‚ç´ æ
177. (Line 1504) é€‰æ‹©é“è·¯å›¾ç‰‡
178. (Line 1506) PNGå›¾ç‰‡ (*.png)
179. (Line 1513) å¯¼å…¥åœºæ™¯å±‚ç´ æ
180. (Line 1516) é€‰æ‹©åœºæ™¯å›¾ç‰‡
181. (Line 1493) æ·»åŠ é“è·¯å±‚ç´ æ
182. (Line 0) 
        pixmap = QPixmap(file_path)
        if pixmap.isNull():
            ...
183. (Line 1496) æ·»åŠ åœºæ™¯å±‚ç´ æ
184. (Line 0) 
        pixmap = QPixmap(file_path)
        if pixmap.isNull():
            ...
185. (Line 1547) å°†é€‰ä¸­çš„é“è·¯å›¾ç‰‡è®¾ä¸ºé“è·¯å±‚èƒŒæ™¯
186. (Line 202) æç¤º
187. (Line 1550) è¯·å…ˆé€‰æ‹©ä¸€ä¸ªé“è·¯å›¾ç‰‡
188. (Line 1560) å°†é€‰ä¸­çš„åœºæ™¯å›¾ç‰‡åŠ è½½åˆ°ç”»å¸ƒä¸­å¤®
189. (Line 1563) è¯·å…ˆé€‰æ‹©ä¸€ä¸ªåœºæ™¯å›¾ç‰‡
190. (Line 0) ):
            # åœ¨ç”»å¸ƒä¸­å¤®æ·»åŠ å…ƒç´ 
            canvas = parent_window.canvas
        ...
191. (Line 1577) é“è·¯å±‚å›¾ç‰‡è¢«ç‚¹å‡»æ—¶ï¼Œæ˜¾ç¤ºé“è·¯å±‚è°ƒæ•´é¢æ¿
192. (Line 1583) åœºæ™¯å±‚å›¾ç‰‡è¢«ç‚¹å‡»æ—¶ï¼Œåœ¨ç”»å¸ƒä¸­é€‰ä¸­å¯¹åº”çš„æ‰€æœ‰å…ƒç´ 
193. (Line 0) 
        import os

        # è·å–ç‚¹å‡»çš„å›¾ç‰‡æ–‡ä»¶è·¯å¾„
        file_path = item.data(Qt.Us...
194. (Line 0) ):
            return

        canvas = parent_window.canvas

        # æ¸…ç©ºå½“å‰é€‰...
195. (Line 1617) [ç´ æåº“] ç‚¹å‡» {filename}ï¼Œç”»å¸ƒä¸­æ²¡æœ‰ä½¿ç”¨è¯¥ç´ æçš„å…ƒç´ 
196. (Line 1104) å±æ€§é¢æ¿
197. (Line 0) 

    def __init__(self, parent=None, canvas=None):
        super().__init__(...
198. (Line 0) )
        layout.addWidget(title)

        # åŸºæœ¬ä¿¡æ¯åˆ†ç»„
        basic_group = QGr...
199. (Line 1640) ä¾‹å¦‚: åƒç´ æ£®æ—
200. (Line 1641) åœºæ™¯åç§°:
201. (Line 1647) ç”»å¸ƒé«˜åº¦:
202. (Line 390) é“è·¯å±‚
203. (Line 1657) æœªé€‰æ‹©é“è·¯å›¾ç‰‡
204. (Line 0) )
        self.road_preview.setMinimumHeight(80)
        road_layout.addWidge...
205. (Line 0) )
        road_layout.addWidget(self.road_filename_label)

        # é“è·¯ä½ç½®è°ƒæ•´
 ...
206. (Line 1677) Xåç§»:
207. (Line 1685) Yåç§»:
208. (Line 1712) ç¼©æ”¾:
209. (Line 1720) å±‚çº§:
210. (Line 1730) æ¸…é™¤é“è·¯
211. (Line 1738) é€‰ä¸­å…ƒç´ 
212. (Line 1743) æœªé€‰ä¸­
213. (Line 0) , self.element_id_label)

        self.element_x_input = QSpinBox()
        s...
214. (Line 1750) Xä½ç½®:
215. (Line 1756) Yä½ç½®:
216. (Line 0) )
        element_layout.addRow(events_label)

        # äº‹ä»¶åˆ—è¡¨
        self.ev...
217. (Line 2) ç¼–è¾‘
218. (Line 525) åˆ é™¤
219. (Line 1830) è®¾ç½®å½“å‰é€‰ä¸­çš„å…ƒç´ 
220. (Line 0) 
        self.current_item = item

        # æ˜¾ç¤ºåœºæ™¯å…ƒç´ é¢æ¿ï¼Œéšè—é“è·¯å±‚é¢æ¿
        self.el...
221. (Line 1448) æ˜¾ç¤ºé“è·¯å±‚è°ƒæ•´é¢æ¿
222. (Line 0) 
        # æ˜¾ç¤ºé“è·¯å±‚é¢æ¿ï¼Œéšè—åœºæ™¯å…ƒç´ é¢æ¿
        self.road_group.setVisible(True)
        ...
223. (Line 0) )

            # æ›´æ–°æ–‡ä»¶åæ˜¾ç¤º
            filename = os.path.basename(self.canvas....
224. (Line 0) )

            # æ›´æ–°ä½ç½®å’Œç¼©æ”¾
            self.road_x_input.setValue(self.canvas.r...
225. (Line 1664) æ–‡ä»¶: æ— 
226. (Line 1923) Xä½ç½®æ”¹å˜ï¼ˆvalue æ˜¯åƒç´ å€¼ï¼‰
227. (Line 0) 
        if self._updating or not self.current_item:
            return

    ...
228. (Line 1935) Yä½ç½®æ”¹å˜
229. (Line 0) 
        if self._updating or not self.current_item:
            return

    ...
230. (Line 1947) ç¼©æ”¾æ»‘å—æ”¹å˜
231. (Line 0) 
        if self._updating or not self.current_item:
            return

    ...
232. (Line 1964) ç¼©æ”¾æ•°å€¼æ¡†æ”¹å˜ï¼ˆvalue å·²ç»æ˜¯å€æ•°ï¼Œå¦‚ 1.5ï¼‰
233. (Line 0) 
        if self._updating or not self.current_item:
            return

    ...
234. (Line 1979) å±‚çº§æ”¹å˜
235. (Line 0) 
        if self._updating or not self.current_item:
            return

    ...
236. (Line 1999) å›¾ç‰‡æ–‡ä»¶ (*.png *.jpg *.jpeg)
237. (Line 1886) æ–‡ä»¶: {filename}
238. (Line 0) 
        if self.canvas:
            # ä»åœºæ™¯ä¸­ç§»é™¤é“è·¯å›¾å½¢å¯¹è±¡
            if self.canva...
239. (Line 2057) Xåç§»æ”¹å˜
240. (Line 2065) Yåç§»æ”¹å˜
241. (Line 2073) é“è·¯ç¼©æ”¾æ»‘å—æ”¹å˜
242. (Line 0) 
        if self._updating:
            return

        # è®¡ç®—å®é™…ç¼©æ”¾å€¼ï¼ˆæ»‘å—å€¼/100ï¼‰
  ...
243. (Line 2091) é“è·¯ç¼©æ”¾æ•°å€¼æ¡†æ”¹å˜
244. (Line 0) 
        if self._updating:
            return

        # åŒæ­¥æ›´æ–°æ»‘å—ï¼ˆé˜»æ­¢å¾ªç¯è§¦å‘ï¼‰
    ...
245. (Line 2107) é“è·¯å±‚çº§æ”¹å˜
246. (Line 0) 
        if self._updating:
            return

        # æ›´æ–°é“è·¯å±‚çš„z-index
     ...
247. (Line 1856) åŠ è½½äº‹ä»¶åˆ—è¡¨
248. (Line 0) 
        self.events_list.clear()

        if not self.current_item:
        ...
249. (Line 185) æ‚¬åœ
250. (Line 186) ç‚¹å‡»
251. (Line 187) æ—¶é—´åˆ°è¾¾
252. (Line 188) è¿›åº¦èŒƒå›´
253. (Line 189) ä»»åŠ¡å¼€å§‹
254. (Line 190) ä»»åŠ¡ç»“æŸ
255. (Line 202) æ˜¾ç¤ºæç¤º
256. (Line 203) æ˜¾ç¤ºå¯¹è¯æ¡†
257. (Line 204) æ‰“å¼€é“¾æ¥
258. (Line 1817) äº‹ä»¶åˆ—è¡¨é€‰ä¸­å˜åŒ–
259. (Line 1801) æ·»åŠ äº‹ä»¶
260. (Line 0) 
        if not self.current_item:
            return

        # æ‰“å¼€äº‹ä»¶é…ç½®å¯¹è¯æ¡†
  ...
261. (Line 2169) ç¼–è¾‘äº‹ä»¶
262. (Line 0) 
        if not self.current_item:
            return

        # è·å–é€‰ä¸­çš„äº‹ä»¶ç´¢å¼•
  ...
263. (Line 2199) åˆ é™¤äº‹ä»¶
264. (Line 0) 
        if not self.current_item:
            return

        # è·å–é€‰ä¸­çš„äº‹ä»¶ç´¢å¼•
  ...
265. (Line 2223) å›¾å±‚ç®¡ç†é¢æ¿ - æ˜¾ç¤º/éšè—/é”å®šå›¾å±‚
266. (Line 0) 

    def __init__(self, canvas=None, parent=None):
        super().__init__(...
267. (Line 262) åˆå§‹åŒ–UI
268. (Line 0) 
        layout = QVBoxLayout(self)
        layout.setContentsMargins(5, 5, 5...
269. (Line 0) )
        title_layout.addWidget(title_label)

        # åˆ·æ–°æŒ‰é’®
        refresh...
270. (Line 81) åˆ·æ–°å›¾å±‚åˆ—è¡¨
271. (Line 2260) ğŸ’¡ æç¤º: æ‹–æ‹½è°ƒæ•´å›¾å±‚é¡ºåº (ä¸Šæ–¹ä¼˜å…ˆæ˜¾ç¤º)
272. (Line 2266) [å›¾å±‚é¢æ¿] refresh_layers() è¢«è°ƒç”¨
273. (Line 2269) [å›¾å±‚é¢æ¿] canvas ä¸º Noneï¼Œè·³è¿‡åˆ·æ–°
274. (Line 2284) ğŸ›£ é“è·¯å±‚
275. (Line 0) : road_item
            })

        # 2. åœºæ™¯å…ƒç´ 
        scene_items_found = 0
 ...
276. (Line 0) )

        for item in self.canvas.scene.items():
            if isinstance(i...
277. (Line 0) : item.item_id,  # ç”¨äºå†…éƒ¨æ ‡è¯†
                    
278. (Line 0) ,  # æ˜¾ç¤ºåŸå§‹æ–‡ä»¶å
                    
279. (Line 0) : item
                })

        # æŒ‰z-indexæ’åºï¼ˆä»é«˜åˆ°ä½ï¼Œé«˜çš„åœ¨ä¸Šæ–¹ï¼‰
        layers.so...
280. (Line 2314) [å›¾å±‚é¢æ¿] æ‰¾åˆ° {len(layers)} ä¸ªå›¾å±‚ï¼ˆåŒ…å«é“è·¯å±‚å’Œåœºæ™¯å…ƒç´ ï¼‰
281. (Line 2315) [å›¾å±‚é¢æ¿] å…¶ä¸­ SceneItemGraphics: {scene_items_found} ä¸ª
282. (Line 2323) [å›¾å±‚é¢æ¿] refresh_layers() å®Œæˆï¼QListWidget æœ€ç»ˆé¡¹æ•°: {final_count}
283. (Line 2325) [å›¾å±‚é¢æ¿] è­¦å‘Šï¼šé¢„æœŸæ·»åŠ  {len(layers)} ä¸ªå›¾å±‚ï¼Œä½† QListWidget åªæœ‰ {final_count} é¡¹ï¼
284. (Line 2328) [å›¾å±‚é¢æ¿] QListWidget.isVisible(): {self.layers_list.isVisible()}
285. (Line 2329) [å›¾å±‚é¢æ¿] QListWidget.isHidden(): {self.layers_list.isHidden()}
286. (Line 2330) [å›¾å±‚é¢æ¿] QListWidget.width(): {self.layers_list.width()}, height(): {self.layer...
287. (Line 2331) [å›¾å±‚é¢æ¿] LayerPanel.isVisible(): {self.isVisible()}
288. (Line 2334) æ·»åŠ å›¾å±‚é¡¹åˆ°åˆ—è¡¨
289. (Line 2336) [å›¾å±‚é¢æ¿] _add_layer_item() è¢«è°ƒç”¨ï¼Œå›¾å±‚ID: {layer_data[
290. (Line 2336) ]}, åç§°: {layer_data[
291. (Line 0) )

            # éªŒè¯ layer_data å®Œæ•´æ€§
            required_keys = [
292. (Line 2342) [å›¾å±‚é¢æ¿] layer_data ç¼ºå°‘å¿…éœ€å­—æ®µ: {key}
293. (Line 2347) [å›¾å±‚é¢æ¿] åˆ›å»º QListWidgetItem æˆåŠŸ
294. (Line 2357) åˆ‡æ¢å¯è§æ€§
295. (Line 0) ]: self._on_visibility_changed(lid, checked)
            )
            layer_...
296. (Line 2367) åˆ‡æ¢é”å®šçŠ¶æ€
297. (Line 0) ]: self._on_lock_changed(lid, checked)
            )
            layer_layout...
298. (Line 0) ])
            layer_layout.addWidget(name_label)

            layer_layout.a...
299. (Line 0) )
            layer_layout.addWidget(z_label)

            # è®¾ç½®widgetåˆ°åˆ—è¡¨é¡¹
   ...
300. (Line 2389)  å·²æ·»åŠ åˆ° QListWidgetï¼Œå½“å‰åˆ—è¡¨é¡¹æ•°: {self.layers_list.count()}
301. (Line 2389) [å›¾å±‚é¢æ¿] å›¾å±‚ 
302. (Line 2398)  å¼•ç”¨å·²ä¿å­˜åˆ° layer_items å­—å…¸
303. (Line 2401) [å›¾å±‚é¢æ¿] _add_layer_item() å¼‚å¸¸: layer_data={layer_data.get(
304. (Line 2404) åˆ‡æ¢å›¾å±‚å¯è§æ€§
305. (Line 2406) [å›¾å±‚é¢æ¿] _on_visibility_changed() è¢«è°ƒç”¨, layer_id={layer_id}, visible={visible}
306. (Line 2409) [å›¾å±‚é¢æ¿] layer_id 
307. (Line 2409)  ä¸åœ¨ layer_items ä¸­,è·³è¿‡
308. (Line 0) ]

            # æ£€æŸ¥ graphics_item æ˜¯å¦æœ‰æ•ˆ
            if graphics_item is None:
...
309. (Line 2416)  çš„ graphics_item ä¸º None
310. (Line 2421)  å¯è§æ€§å·²è®¾ç½®ä¸º: {visible}
311. (Line 2428) [å›¾å±‚é¢æ¿] _on_visibility_changed() å¼‚å¸¸: layer_id={layer_id}, error={e}
312. (Line 2431) åˆ‡æ¢å›¾å±‚é”å®šçŠ¶æ€
313. (Line 2435) [å›¾å±‚é¢æ¿] _on_lock_changed() è¢«è°ƒç”¨, layer_id={layer_id}, locked={locked}
314. (Line 2456)  é”å®šçŠ¶æ€å·²è®¾ç½®ä¸º: {locked}
315. (Line 2223) é”å®š
316. (Line 2464) [å›¾å±‚é¢æ¿] é”å®šæ ‡è®°æ–‡æœ¬å·²æ›´æ–°: {
317. (Line 2468) [å›¾å±‚é¢æ¿] _on_lock_changed() å¼‚å¸¸: layer_id={layer_id}, error={e}
318. (Line 2471) å›¾å±‚é¡ºåºæ”¹å˜æ—¶æ›´æ–°z-index
319. (Line 2473) [å›¾å±‚é¢æ¿] _on_layer_reordered() è¢«è°ƒç”¨
320. (Line 2476) [å›¾å±‚é¢æ¿] canvas ä¸º None,è·³è¿‡å›¾å±‚æ’åº
321. (Line 2481) [å›¾å±‚é¢æ¿] å¼€å§‹é‡æ–°æ’åº {item_count} ä¸ªå›¾å±‚
322. (Line 2486) [å›¾å±‚é¢æ¿] list_item at index {i} is None,è·³è¿‡
323. (Line 0) ] == list_item:
                        # è®¡ç®—æ–°çš„z-indexï¼ˆä¸Šæ–¹=é«˜z-indexï¼‰
          ...
324. (Line 2504)  æ–° z-index: {new_z}
325. (Line 0) )
                                    break

                        break

 ...
326. (Line 2520) [å›¾å±‚é¢æ¿] _on_layer_reordered() å¼‚å¸¸: {e}
327. (Line 2524) åœºæ™¯ç¼–è¾‘å™¨ä¸»çª—å£
328. (Line 0) 

    # çª—å£å…³é—­ä¿¡å·ï¼ˆç”¨äºé€šçŸ¥çˆ¶çª—å£åˆ·æ–°åœºæ™¯åˆ—è¡¨ï¼‰
    editor_closed = Signal()

    def __init__(...
329. (Line 0) )
        self.setGeometry(100, 100, 1400, 800)

        # ç¡®å®šåœºæ™¯ä¿å­˜ç›®å½•ï¼šä½¿ç”¨ç”¨æˆ·ç›®å½•ï¼ˆå¯ç¼–...
330. (Line 2548) [åœºæ™¯ç¼–è¾‘å™¨] ç”¨æˆ·åœºæ™¯ç›®å½•: {self.scenes_dir}
331. (Line 0) , False):
            # PyInstaller æ‰“åŒ…ç¯å¢ƒï¼šsys._MEIPASS ä¸´æ—¶ç›®å½•
            if has...
332. (Line 2555) [åœºæ™¯ç¼–è¾‘å™¨] å†…ç½®åœºæ™¯ç›®å½•: {self.builtin_scenes_dir}
333. (Line 2558) [åœºæ™¯ç¼–è¾‘å™¨] æœªæ‰¾åˆ°sys._MEIPASSï¼Œæ— æ³•åŠ è½½å†…ç½®åœºæ™¯
334. (Line 2562) [åœºæ™¯ç¼–è¾‘å™¨] å†…ç½®åœºæ™¯ç›®å½•ï¼ˆå¼€å‘ç¯å¢ƒï¼‰: {self.builtin_scenes_dir}
335. (Line 0) )
        self.zoom_combo.currentTextChanged.connect(self.on_zoom_combo_chang...
336. (Line 2608) ç¼©å° (Ctrl+æ»šè½®å‘ä¸‹)
337. (Line 2615) æ”¾å¤§ (Ctrl+æ»šè½®å‘ä¸Š)
338. (Line 1124) é€‚åº”çª—å£
339. (Line 2622) ç¼©æ”¾åˆ°é€‚åˆçª—å£å¤§å°å¹¶å±…ä¸­
340. (Line 2628) ğŸ’¡ Ctrl+æ»šè½®ç¼©æ”¾ | ç©ºæ ¼é”®æ‹–åŠ¨è§†å›¾
341. (Line 0) )
        zoom_layout.addWidget(hint_label)

        canvas_layout.addWidget(...
342. (Line 0) )
        self.play_button.clicked.connect(self.toggle_play)
        self.pla...
343. (Line 0) )
        reset_button.clicked.connect(self.reset_progress)
        reset_but...
344. (Line 0) )
        self.progress_label.setMinimumWidth(40)
        progress_layout.add...
345. (Line 0) ])
        self.speed_combo.setCurrentIndex(1)  # é»˜è®¤1x
        self.speed_com...
346. (Line 0) )

        # Tab 2: å›¾å±‚ç®¡ç†é¢æ¿
        self.layer_panel = LayerPanel(canvas=self....
347. (Line 0) )

        right_panel_layout.addWidget(self.right_panel_tabs)

        # å°åœ°å›¾...
348. (Line 0) )
        right_panel_layout.addWidget(minimap_label)

        self.minimap =...
349. (Line 2735) å¸é™„ç½‘æ ¼
350. (Line 403) å¯¹é½è¾…åŠ©çº¿
351. (Line 590) å®‰å…¨åŒºåŸŸè’™ç‰ˆ
352. (Line 2755) ç”»å¸ƒå®½åº¦:
353. (Line 2757) 1800px (æ¨è)
354. (Line 0) ])
        # æ ¹æ®å½“å‰ç”»å¸ƒå®½åº¦è®¾ç½®é»˜è®¤å€¼
        if self.canvas.canvas_width == 1200:
     ...
355. (Line 2776) ä»config.jsonå¯¼å…¥åœºæ™¯è¿›è¡Œç¼–è¾‘
356. (Line 2780) ğŸ’¾ å¯¼å‡ºåœºæ™¯é…ç½®
357. (Line 2782) å¯¼å‡ºå½“å‰åœºæ™¯ä¸ºconfig.jsonæ–‡ä»¶
358. (Line 2802) [åœºæ™¯ç¼–è¾‘å™¨] å°†è‡ªåŠ¨åŠ è½½é»˜è®¤åœºæ™¯ä½œä¸ºæ¨¡æ¿
359. (Line 2804) [åœºæ™¯ç¼–è¾‘å™¨] é»˜è®¤åœºæ™¯é…ç½®æ–‡ä»¶ä¸å­˜åœ¨: {config_path}
360. (Line 2806) [åœºæ™¯ç¼–è¾‘å™¨] builtin_scenes_dir æœªè®¾ç½®ï¼Œæ— æ³•è‡ªåŠ¨åŠ è½½
361. (Line 2793) åˆ›å»ºå¿«æ·é”®
362. (Line 0) 
        from PySide6.QtGui import QShortcut, QKeySequence
        from PySid...
363. (Line 2834) å¤„ç†å¤åˆ¶å¿«æ·é”®
364. (Line 0) )  # è°ƒè¯•æ—¥å¿—
        self.canvas.copy_selected_items()

    def _handle_paste(se...
365. (Line 2839) å¤„ç†ç²˜è´´å¿«æ·é”®
366. (Line 0) )  # è°ƒè¯•æ—¥å¿—
        self.canvas.paste_items()

    def _handle_delete(self):
  ...
367. (Line 2844) å¤„ç†åˆ é™¤å¿«æ·é”®
368. (Line 0) )  # è°ƒè¯•æ—¥å¿—
        self.canvas.delete_selected_items()

    def select_all_ite...
369. (Line 2849) å…¨é€‰æ‰€æœ‰å…ƒç´ ï¼ˆåœºæ™¯å±‚å’Œé“è·¯å±‚ï¼‰
370. (Line 0) 
        for item in self.canvas.scene.items():
            # é€‰ä¸­åœºæ™¯å…ƒç´ å’Œé“è·¯å±‚
    ...
371. (Line 2723) åˆ›å»ºå·¥å…·æ 
372. (Line 2857) ä¸»å·¥å…·æ 
373. (Line 65) æ’¤é”€
374. (Line 65) é‡åš
375. (Line 2876) å¤åˆ¶ (Ctrl+C)
376. (Line 2881) ç²˜è´´ (Ctrl+V)
377. (Line 2886) åˆ é™¤ (Del)
378. (Line 2893) å…¨é€‰ (Ctrl+A)
379. (Line 2898) åˆ‡æ¢ç½‘æ ¼æ˜¾ç¤º
380. (Line 2903) åˆ‡æ¢ç½‘æ ¼å¸é™„
381. (Line 2907) åˆ‡æ¢å¯¹é½è¾…åŠ©çº¿
382. (Line 0) 
        self.canvas.enable_alignment_guides = checked
        # å¦‚æœå…³é—­ï¼Œæ¸…é™¤ç°æœ‰çš„è¾…åŠ©...
383. (Line 2919) å¤„ç†ç”»å¸ƒå®½åº¦åˆ‡æ¢
384. (Line 0) 
        # ä»æ–‡æœ¬ä¸­æå–å®½åº¦å€¼ï¼ˆ
385. (Line 0) )[0]
        try:
            new_width = int(width_str)
        except Value...
386. (Line 2956) åˆ‡æ¢æ’­æ”¾/æš‚åœ
387. (Line 2647) â–¶ æ’­æ”¾
388. (Line 2962) â¸ æš‚åœ
389. (Line 2965) é‡ç½®è¿›åº¦åˆ°0
390. (Line 2971) è¿›åº¦æ»‘å—æ”¹å˜
391. (Line 2977) æ’­æ”¾é€Ÿåº¦æ”¹å˜
392. (Line 2982) ç¼©æ”¾ä¸‹æ‹‰èœå•æ”¹å˜
393. (Line 0) 
        # æå–ç™¾åˆ†æ¯”æ•°å€¼ (
394. (Line 2988) æ”¾å¤§ç”»å¸ƒ
395. (Line 0) 
        self.canvas.zoom_in()
        # åŒæ­¥æ›´æ–°ä¸‹æ‹‰èœå•
        self._update_zoom_c...
396. (Line 2994) ç¼©å°ç”»å¸ƒ
397. (Line 0) 
        self.canvas.zoom_out()
        # åŒæ­¥æ›´æ–°ä¸‹æ‹‰èœå•
        self._update_zoom_...
398. (Line 0) 
        self.canvas.zoom_fit()
        # åŒæ­¥æ›´æ–°ä¸‹æ‹‰èœå•
        self._update_zoom_...
399. (Line 3006) æ›´æ–°ç¼©æ”¾ä¸‹æ‹‰èœå•æ˜¾ç¤º
400. (Line 0) 

        # é˜»æ­¢ä¿¡å·è§¦å‘ï¼ˆé¿å…å¾ªç¯è°ƒç”¨ï¼‰
        self.zoom_combo.blockSignals(True)

      ...
401. (Line 3021) åˆ é™¤é€‰ä¸­çš„å…ƒç´ ï¼ˆå·²åºŸå¼ƒï¼Œä½¿ç”¨canvas.delete_selected_itemsï¼‰
402. (Line 3025) å¤„ç†å…ƒç´ é€‰ä¸­äº‹ä»¶
403. (Line 0) 
        import os

        # æ›´æ–°å±æ€§é¢æ¿
        self.property_panel.set_selected...
404. (Line 0) ):
            filename = os.path.basename(item.image_path)

            # éå†...
405. (Line 3046) å¤„ç†é“è·¯å±‚é€‰ä¸­äº‹ä»¶
406. (Line 0) 
        import os

        # æ˜¾ç¤ºé“è·¯å±æ€§é¢æ¿
        self.property_panel.show_road_...
407. (Line 3067) å¯¼å‡ºåœºæ™¯é…ç½®ï¼ˆè‡ªåŠ¨å¤åˆ¶æ‰€æœ‰å›¾ç‰‡åˆ°æ ‡å‡†ç›®å½•ç»“æ„ï¼‰
408. (Line 0) 
        import os
        import shutil
        from pathlib import Path

  ...
409. (Line 0) 

        # åˆ›å»ºä¸“ç”¨çš„loggerå’Œhandlerï¼ˆé¿å…basicConfigé…ç½®å†²çªï¼‰
        logger = logging.g...
410. (Line 0) )
        logger.setLevel(logging.DEBUG)
        logger.handlers.clear()  # æ¸…...
411. (Line 3088) å¼€å§‹å¯¼å‡ºåœºæ™¯é…ç½®
412. (Line 3089) æ—¥å¿—æ–‡ä»¶ä½ç½®: {log_file}
413. (Line 0)  * 50)

        # è·å–åœºæ™¯åç§°
        scene_name = self.property_panel.scene_name_...
414. (Line 3096) åœºæ™¯åç§°ä¸ºç©ºï¼
415. (Line 3097) å¯¼å‡ºå¤±è´¥
416. (Line 3097) è¯·å…ˆè®¾ç½®åœºæ™¯åç§°ï¼
417. (Line 3102) è§„èŒƒåŒ–åçš„åœºæ™¯åç§°: 
418. (Line 3104) åœºæ™¯åç§°æ ¼å¼ä¸æ­£ç¡®ï¼
419. (Line 3105) åœºæ™¯åç§°æ ¼å¼ä¸æ­£ç¡®ï¼è¯·ä½¿ç”¨å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿æˆ–æ¨ªçº¿ã€‚
420. (Line 3110) å¯¼å‡ºç›®æ ‡ç›®å½•: {scene_dir}
421. (Line 0) )

        # åˆå§‹åŒ–å¤‡ä»½è·¯å¾„ï¼ˆç¡®ä¿åœ¨æ‰€æœ‰ä»£ç è·¯å¾„ä¸­éƒ½èƒ½è®¿é—®ï¼‰
        road_backup_path = None
        ...
422. (Line 3122) åœºæ™¯å·²å­˜åœ¨
423. (Line 3123) åœºæ™¯ 
424. (Line 3123)  å·²å­˜åœ¨ï¼Œæ˜¯å¦è¦†ç›–ï¼Ÿ\n\nè·¯å¾„: {scene_dir}
425. (Line 3128) ç”¨æˆ·é€‰æ‹©ä¸è¦†ç›–ï¼Œå–æ¶ˆå¯¼å‡º
426. (Line 3140) é“è·¯å±‚å·²å¤‡ä»½åˆ°: {road_backup_path}
427. (Line 3152) åœºæ™¯å…ƒç´ å·²å¤‡ä»½: {old_item_path.name} -> {tmp.name}
428. (Line 3155) å·²å¤‡ä»½ {len(scene_items_backup)} ä¸ªåœºæ™¯å…ƒç´ 
429. (Line 3158) åˆ é™¤æ—§åœºæ™¯ç›®å½•...
430. (Line 3161) æ—§åœºæ™¯åˆ é™¤æˆåŠŸ
431. (Line 3163) åˆ é™¤æ—§åœºæ™¯å¤±è´¥: {e}
432. (Line 3171) æ¸…ç†é“è·¯å±‚ä¸´æ—¶æ–‡ä»¶å¤±è´¥: {cleanup_error}
433. (Line 3179) æ¸…ç†åœºæ™¯å…ƒç´ ä¸´æ—¶æ–‡ä»¶å¤±è´¥: {cleanup_error}
434. (Line 3182) å·²æ¸…ç† {cleanup_count} ä¸ªä¸´æ—¶å¤‡ä»½æ–‡ä»¶
435. (Line 3184) åˆ é™¤å¤±è´¥
436. (Line 3184) æ— æ³•åˆ é™¤æ—§åœºæ™¯:\n{e}
437. (Line 3188) åˆ›å»ºåœºæ™¯ç›®å½•ç»“æ„...
438. (Line 3190) åˆ›å»ºä¸»ç›®å½•: {scene_dir}
439. (Line 3193) åˆ›å»º assets å­ç›®å½•
440. (Line 3197) ç›®å½•åˆ›å»ºæˆåŠŸ: {scene_dir}
441. (Line 3199) åˆ›å»ºç›®å½•å¤±è´¥: {e}
442. (Line 3199) åˆ›å»ºç›®å½•å¤±è´¥
443. (Line 3221) æ— æ³•åˆ›å»ºåœºæ™¯ç›®å½•:\n{e}
444. (Line 0) : {}
        }

        # æ·»åŠ é“è·¯å±‚ï¼ˆå¦‚æœæœ‰ï¼‰
        logger.info(f
445. (Line 3242) å¼€å§‹å¤„ç†é“è·¯å±‚...
446. (Line 3249) é“è·¯å±‚ä½ç½®: x={self.canvas.road_offset_x}, y={self.canvas.road_offset_y}
447. (Line 0)   # é»˜è®¤æ–‡ä»¶å
            try:
                # ä¼˜å…ˆä½¿ç”¨å¤‡ä»½æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰å¤‡ä»½åˆ™ä½¿ç”¨å½“å‰è·¯å¾„
         ...
448. (Line 3260) é“è·¯å±‚æºæ–‡ä»¶: {road_src}
449. (Line 3266) é“è·¯å±‚å¤åˆ¶æˆåŠŸ: {road_dest_name}
450. (Line 3267) é“è·¯å±‚: {road_dest_name}
451. (Line 3273) ä¸´æ—¶å¤‡ä»½æ–‡ä»¶å·²æ¸…ç†: {road_backup_path}
452. (Line 3278) é“è·¯å±‚æºæ–‡ä»¶ä¸å­˜åœ¨: {road_src}
453. (Line 2325) è­¦å‘Š
454. (Line 3282) é“è·¯å±‚æºæ–‡ä»¶ä¸å­˜åœ¨:\n{road_src}\n\nå°†è·³è¿‡é“è·¯å±‚å¯¼å‡ºã€‚
455. (Line 3285) å¤åˆ¶é“è·¯å±‚å¤±è´¥: {e}
456. (Line 3286) é“è·¯å±‚å¤åˆ¶å¤±è´¥ï¼Œå°†ç»§ç»­å¯¼å‡ºå…¶ä»–å†…å®¹:\n{e}
457. (Line 0) ,  # æ·»åŠ  assets/ å‰ç¼€
                
458. (Line 0) : self.canvas.road_offset_x,  # ä¿®æ­£å­—æ®µå: x_offset â†’ offset_x
                
459. (Line 0) : self.canvas.road_offset_y,  # ä¿®æ­£å­—æ®µå: y_offset â†’ offset_y
                
460. (Line 0) : int(self.canvas.road_item.zValue()) if self.canvas.road_item else 50
      ...
461. (Line 3308) åœºæ™¯ä¸­çš„æ‰€æœ‰å›¾å½¢é¡¹: {len(self.canvas.scene.items())}
462. (Line 3309) scene_items æ˜¯å¦ä¸ºç©º: {len(self.canvas.scene_items) == 0}
463. (Line 3312) è­¦å‘Šï¼šscene_items åˆ—è¡¨ä¸ºç©ºï¼
464. (Line 3313) å°è¯•ä» scene.items() ä¸­æŸ¥æ‰¾åœºæ™¯å…ƒç´ ...
465. (Line 3315)   - å›¾å½¢é¡¹ç±»å‹: {type(item).__name__}
466. (Line 3318) å¤„ç†ç¬¬ {i+1}/{len(self.canvas.scene_items)} ä¸ªå…ƒç´ : {item.image_path}
467. (Line 3324)   ä½¿ç”¨å¤‡ä»½çš„åœºæ™¯å…ƒç´ æ–‡ä»¶: {item_src}
468. (Line 3327)   åœºæ™¯å…ƒç´ æºæ–‡ä»¶: {item_src}
469. (Line 3330)   åŸå§‹æ–‡ä»¶å: {original_name}
470. (Line 3333)   å¤åˆ¶åæ–‡ä»¶å: {item_dest_name}
471. (Line 3334) åœºæ™¯å…ƒç´ : {item_dest_name}
472. (Line 3341)   é…ç½®é¡¹æ·»åŠ æˆåŠŸ: {item_config[
473. (Line 3343) å¤„ç†å…ƒç´  {i+1} æ—¶å‡ºé”™: {e}
474. (Line 3349) åœºæ™¯é…ç½®é¡¹æ•°é‡: {len(scene_items_config)}
475. (Line 3350) å®Œæ•´é…ç½®ï¼ˆå‰500å­—ç¬¦ï¼‰: {json.dumps(config, indent=2, ensure_ascii=False)[:500]}
476. (Line 3354) å‡†å¤‡å†™å…¥é…ç½®æ–‡ä»¶: {config_path}
477. (Line 3358) é…ç½®æ–‡ä»¶å†™å…¥æˆåŠŸï¼
478. (Line 3359) é…ç½®æ–‡ä»¶å¤§å°: {config_path.stat().st_size} å­—èŠ‚
479. (Line 3361) é…ç½®æ–‡ä»¶å†™å…¥å¤±è´¥: {e}
480. (Line 3383) ä¿å­˜å¤±è´¥
481. (Line 3383) æ— æ³•ä¿å­˜é…ç½®æ–‡ä»¶:\n{e}
482. (Line 3388) å¯¼å‡ºå®Œæˆï¼å…±å¤åˆ¶ {file_count} ä¸ªæ–‡ä»¶
483. (Line 3391) åœºæ™¯å·²æˆåŠŸå¯¼å‡ºåˆ°:\n{scene_dir.absolute()}\n\n
484. (Line 3392) åŒ…å«:\n- config.json\n- {file_count} ä¸ªå›¾ç‰‡æ–‡ä»¶\n\n
485. (Line 3393) âš ï¸ é‡è¦æç¤º:\n
486. (Line 3394) æ–°å¯¼å‡ºçš„åœºæ™¯éœ€è¦ã€é‡å¯ä¸»ç¨‹åºã€‘åæ‰èƒ½åœ¨åœºæ™¯åˆ—è¡¨ä¸­æ˜¾ç¤ºã€‚\n
487. (Line 3395) æˆ–è€…åœ¨ä¸»ç¨‹åºçš„åœºæ™¯è®¾ç½®ä¸­ç‚¹å‡»ã€åˆ·æ–°åœºæ™¯ã€‘æŒ‰é’®ã€‚
488. (Line 3400) å¯¼å‡ºæˆåŠŸ
489. (Line 3401) \n\næ˜¯å¦æ‰“å¼€æ–‡ä»¶å¤¹ï¼Ÿ
490. (Line 3418) æ‰“å¼€å¤±è´¥
491. (Line 3418) æ— æ³•æ‰“å¼€æ–‡ä»¶å¤¹:\n{e}
492. (Line 3426) å·²åˆ é™¤é“è·¯å±‚ä¸´æ—¶å¤‡ä»½: {road_backup_path}
493. (Line 3428) æ¸…ç†é“è·¯å±‚ä¸´æ—¶æ–‡ä»¶å¤±è´¥: {e}
494. (Line 3435) å·²åˆ é™¤åœºæ™¯å…ƒç´ ä¸´æ—¶å¤‡ä»½: {backup_path}
495. (Line 3437) æ¸…ç†åœºæ™¯å…ƒç´ ä¸´æ—¶æ–‡ä»¶å¤±è´¥: {e}
496. (Line 0) 
        å¤åˆ¶æ–‡ä»¶åˆ°ç›®æ ‡ç›®å½•ï¼Œå¦‚æœæ–‡ä»¶åå†²çªåˆ™è‡ªåŠ¨é‡å‘½å

        Args:
            src_path: æºæ–‡ä»¶è·¯å¾„
 ...
497. (Line 0) 
        import shutil

        # åˆ†ç¦»æ–‡ä»¶åå’Œæ‰©å±•å
        name_part, ext_part = os....
498. (Line 0) 
            dest_path = dest_dir / new_name
            counter += 1

      ...
499. (Line 3474) è‡ªåŠ¨åŠ è½½å†…ç½®é»˜è®¤åœºæ™¯ä½œä¸ºæ¨¡æ¿
500. (Line 0) 
        try:
            # æ„é€ é»˜è®¤åœºæ™¯é…ç½®æ–‡ä»¶è·¯å¾„
            config_path = self.built...
501. (Line 3480) [åœºæ™¯ç¼–è¾‘å™¨] é»˜è®¤åœºæ™¯é…ç½®ä¸å­˜åœ¨: {config_path}
502. (Line 3483) [åœºæ™¯ç¼–è¾‘å™¨] æ­£åœ¨åŠ è½½é»˜è®¤åœºæ™¯: {config_path}
503. (Line 0) ) as f:
                config = json.load(f)

            # æ¸…ç©ºå½“å‰åœºæ™¯
         ...
504. (Line 3493) æœªå‘½ååœºæ™¯
505. (Line 3494) {scene_name}ï¼ˆæ¨¡æ¿ï¼‰
506. (Line 0) , 150)

            # æ›´æ–°ç”»å¸ƒå®½åº¦
            width_index = self.canvas_width_comb...
507. (Line 0) )
            if width_index >= 0:
                self.canvas_width_combo.se...
508. (Line 0) )
            if road_config:
                self._load_road_layer(road_conf...
509. (Line 0) , [])
            self._load_scene_items(items, str(config_path))

          ...
510. (Line 0) )

            # éªŒè¯LayerPanelå¯è§æ€§
            logging.debug(f
511. (Line 3540) [åœºæ™¯ç¼–è¾‘å™¨] LayerPanel çˆ¶å®¹å™¨: {self.layer_panel.parent()}
512. (Line 3541) [åœºæ™¯ç¼–è¾‘å™¨] TabWidgetå½“å‰widget: {self.right_panel_tabs.currentWidget()}
513. (Line 3542) [åœºæ™¯ç¼–è¾‘å™¨] å½“å‰widget == LayerPanel: {self.right_panel_tabs.currentWidget() == sel...
514. (Line 3551) [åœºæ™¯ç¼–è¾‘å™¨] é»˜è®¤åœºæ™¯åŠ è½½æˆåŠŸï¼ŒåŒ…å« {len(items)} ä¸ªå…ƒç´ 
515. (Line 3554) [åœºæ™¯ç¼–è¾‘å™¨] åŠ è½½é»˜è®¤åœºæ™¯å¤±è´¥: {e}
516. (Line 3557) å¯¼å…¥åœºæ™¯é…ç½®
517. (Line 0) 
        # é€‰æ‹©æ–‡ä»¶
        file_path, _ = QFileDialog.getOpenFileName(
         ...
518. (Line 3563) JSONæ–‡ä»¶ (*.json)
519. (Line 0) ) as f:
                config = json.load(f)

            # æ¸…ç©ºå½“å‰åœºæ™¯
         ...
520. (Line 0) , 1800)  # è¯»å–ç”»å¸ƒå®½åº¦
            canvas_height = canvas_config.get(
521. (Line 0) , 150)

            # æ›´æ–°ç”»å¸ƒå®½åº¦ï¼ˆé€šè¿‡å®½åº¦é€‰æ‹©æ§ä»¶ï¼‰
            width_index = self.canvas_...
522. (Line 0) )
            if width_index >= 0:
                self.canvas_width_combo.se...
523. (Line 0) )
            if road_config:
                self._load_road_layer(road_conf...
524. (Line 0) , [])
            self._load_scene_items(items, file_path)

            # åˆ·æ–°å›¾...
525. (Line 3624) åœºæ™¯é…ç½®å·²å¯¼å…¥:\n{scene_name}\n\nåŒ…å« {len(items)} ä¸ªåœºæ™¯å…ƒç´ 
526. (Line 3630) å¯¼å…¥å¤±è´¥
527. (Line 3631) å¯¼å…¥åœºæ™¯é…ç½®æ—¶å‡ºé”™:\n{str(e)}
528. (Line 3489) æ¸…ç©ºå½“å‰åœºæ™¯
529. (Line 0) 
        # æ¸…ç©ºæ‰€æœ‰åœºæ™¯å…ƒç´ 
        for item in self.canvas.scene_items[:]:  # ä½¿ç”¨åˆ‡ç‰‡é¿å…...
530. (Line 3515) åŠ è½½é“è·¯å±‚
531. (Line 0) 
        import os
        from pathlib import Path

        # è·å–é…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•
   ...
532. (Line 0) )
        if not road_image_file:
            return

        # æ„é€ å®Œæ•´è·¯å¾„ï¼ˆä¼˜å…ˆåŒç›®å½•ä¸‹...
533. (Line 3682) é“è·¯å›¾ç‰‡æœªæ‰¾åˆ°
534. (Line 3683) æ— æ³•æ‰¾åˆ°é“è·¯å›¾ç‰‡:\n{road_image_file}\n\nè¯·ç¡®ä¿å›¾ç‰‡åœ¨config.jsonåŒç›®å½•æˆ–assetså­ç›®å½•ä¸­
535. (Line 0) , 1.0)

        # è®¾ç½®é“è·¯å›¾ç‰‡ï¼ˆä¼šä½¿ç”¨ä¸Šé¢è®¾ç½®çš„offsetå’Œscaleï¼‰
        self.canvas.set_road_i...
536. (Line 3521) åŠ è½½åœºæ™¯å…ƒç´ 
537. (Line 0) 
        import os
        from pathlib import Path

        # è·å–é…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•
   ...
538. (Line 3709) [å¯¼å…¥] é…ç½®æ–‡ä»¶ç›®å½•: {config_dir}
539. (Line 3715) [å¯¼å…¥] è·³è¿‡ç©ºå›¾ç‰‡è·¯å¾„çš„å…ƒç´ 
540. (Line 3731) [å¯¼å…¥] æ— æ³•æ‰¾åˆ°åœºæ™¯å…ƒç´ å›¾ç‰‡: {image_file}
541. (Line 3732) [å¯¼å…¥] å°è¯•çš„è·¯å¾„: {[str(p) for p in possible_paths]}
542. (Line 3737) [å¯¼å…¥] æˆåŠŸåŠ è½½å›¾ç‰‡: {image_path}, ID: {item_id}
543. (Line 0) , {})
            # æ³¨æ„ï¼šconfigä¸­ä¿å­˜çš„æ˜¯0-100èŒƒå›´ï¼Œéœ€è¦è½¬æ¢ä¸º0-1èŒƒå›´
            scene_item.x...
544. (Line 0) , 0)

            # è®¡ç®—å®é™…Xä½ç½®ï¼ˆåŸºäºç”»å¸ƒå®½åº¦ï¼‰
            x_pos = scene_item.x_percent ...
545. (Line 0) , 1.0)
            scene_item.scale_factor = scale
            scene_item.set...
546. (Line 0) , 51)
            scene_item.setZValue(z_index)

            # åŠ è½½äº‹ä»¶é…ç½®
       ...
547. (Line 0) , {})
                )

                event_config = EventConfig(trigger=t...
548. (Line 0) , {})
                if trigger_params:
                    event_config.tri...
549. (Line 3785) çª—å£å…³é—­äº‹ä»¶ - å‘å‡ºä¿¡å·é€šçŸ¥çˆ¶çª—å£
550. (Line 3791) ä¸»å‡½æ•°
551. (Line 0) 
    # é…ç½®æ—¥å¿—è¾“å‡º
    logging.basicConfig(
        level=logging.DEBUG,
        f...
