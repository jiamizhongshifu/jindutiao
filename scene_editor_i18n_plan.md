# scene_editor.py 国际化规划文档

## 📅 创建时间
2025-11-23

## 📊 字符串统计
- **总字符串数**: 551个
- **UI可见字符串**: 397个（需要翻译）
- **文档字符串**: 138个（不翻译）
- **日志字符串**: 16个（需要翻译）
- **总翻译键**: 约413个（397 UI + 16 日志）

## 🎯 工作量评估
- **预计工作时间**: 5-8小时
- **建议分阶段**: 3个阶段，每阶段2-3小时
- **复杂度**: ⭐⭐⭐⭐⭐ 极高

## 🗂️ 主要模块结构

### 模块分析
根据类结构，scene_editor.py 包含以下主要模块：

```
scene_editor
├── commands/          # 撤销/重做命令 (~20个字符串)
│   ├── add_item
│   ├── move_item
│   ├── move_multiple
│   └── scale_item
│
├── events/            # 事件配置 (~40个字符串)
│   ├── dialog
│   ├── triggers
│   ├── actions
│   └── params
│
├── canvas/            # 场景画布 (~60个字符串)
│   ├── scene
│   ├── items
│   ├── selection
│   └── context_menu
│
├── minimap/           # 小地图 (~15个字符串)
│   └── widget
│
├── asset_library/     # 素材库 (~80个字符串)
│   ├── panel
│   ├── categories
│   ├── items
│   └── management
│
├── property_panel/    # 属性面板 (~100个字符串)
│   ├── basic
│   ├── position
│   ├── size
│   ├── appearance
│   └── events
│
├── layer_panel/       # 图层面板 (~40个字符串)
│   ├── list
│   ├── operations
│   └── context_menu
│
└── main_window/       # 主窗口 (~60个字符串)
    ├── window
    ├── menus
    ├── toolbars
    ├── dialogs
    └── status_bar
```

## 📋 命名空间设计

### 总体命名空间结构
```
scene_editor
├── commands           # 命令文本
├── events             # 事件配置
├── canvas             # 画布相关
├── minimap            # 小地图
├── asset_library      # 素材库
├── property_panel     # 属性面板
├── layer_panel        # 图层面板
├── main_window        # 主窗口
├── messages           # 消息提示
└── common             # 通用文本
```

## 🚀 分阶段实施策略

### 阶段1: 核心命令和事件系统（预计2-3小时）
**目标模块**: commands, events
**字符串数**: 约60个
**包含内容**:
- 撤销/重做命令文本
- 事件配置对话框
- 触发器和动作类型

### 阶段2: UI面板系统（预计2-3小时）
**目标模块**: asset_library, property_panel, layer_panel, minimap
**字符串数**: 约235个
**包含内容**:
- 素材库面板
- 属性面板
- 图层面板
- 小地图控件

### 阶段3: 主窗口和画布系统（预计2小时）
**目标模块**: main_window, canvas, messages, common
**字符串数**: 约118个
**包含内容**:
- 主窗口菜单和工具栏
- 场景画布
- 消息提示
- 通用文本

## 🔧 实施方法

### 1. 提取和分类
- ✅ 已完成：提取所有551个字符串
- ⏳ 待完成：按模块详细分类

### 2. 翻译键设计
- 每个模块独立设计命名空间
- 使用层级结构组织
- 保持命名一致性

### 3. 代码修改
**优先级**:
1. 高优先级：手动修改（复杂逻辑）
2. 中优先级：半自动修改（简单字符串）
3. 低优先级：自动化脚本（纯文本替换）

### 4. 验证测试
- 语法验证：python -m py_compile
- 功能测试：运行场景编辑器
- 翻译完整性检查

## 📈 预期挑战

### 已知挑战
1. **字符串数量巨大**: 397个UI字符串，需要分批处理
2. **复杂的UI逻辑**: 多个面板和对话框，相互关联
3. **动态字符串**: 可能包含参数替换
4. **字符串格式多样**: 单引号、双引号、f-string等

### 应对策略
1. **分模块处理**: 按功能模块逐个完成
2. **详细规划**: 为每个模块创建子规划文档
3. **自动化脚本**: 尽可能使用脚本辅助
4. **渐进式验证**: 每完成一个模块立即验证

## 🎯 成功标准

### 质量目标
- 翻译完整性: 100%覆盖所有UI字符串
- 代码语法: 100%通过验证
- 功能完整性: 所有功能正常运行
- 命名一致性: 命名空间结构清晰

### 文档目标
- 每个阶段都有详细的总结文档
- 最终生成完整的scene_editor国际化报告
- 更新整体进度报告

## 💡 下一步行动

### 立即行动
1. 创建阶段1的详细规划文档
2. 提取阶段1的字符串（commands + events）
3. 设计阶段1的翻译键
4. 开始阶段1的代码修改

### 后续行动
2. 完成阶段1后，立即开始阶段2
3. 完成阶段2后，立即开始阶段3
4. 完成阶段3后，全面验证和测试

---

**文档创建时间**: 2025-11-23
**预期完成时间**: 2025-11-23 至 2025-11-25（3天内）
**当前状态**: 规划完成，准备开始阶段1
