# UIæ ·å¼ä¿®æ”¹æ— æ•ˆé—®é¢˜è¯Šæ–­æ–¹æ³•è®º

> åŸºäº"æ”¯ä»˜æ–¹å¼å•é€‰æŒ‰é’®æ ·å¼ä¼˜åŒ–"å®æˆ˜æ¡ˆä¾‹æ€»ç»“
> æ¡ˆä¾‹æ—¶é—´ï¼š2025-11-07
> é—®é¢˜ç‰¹å¾ï¼šå¤šæ¬¡ä¿®æ”¹ä»£ç å¹¶é‡æ–°æ‰“åŒ…ï¼Œä½†UIæ ·å¼å®Œå…¨æ²¡æœ‰å˜åŒ–

---

## é—®é¢˜èƒŒæ™¯

**ç”¨æˆ·éœ€æ±‚**ï¼šç®€åŒ–"é€‰æ‹©æ”¯ä»˜æ–¹å¼"åŒºåŸŸçš„å•é€‰æŒ‰é’®æ ·å¼ï¼Œå»æ‰å¤–æè¾¹ã€‚

**é—®é¢˜ç°è±¡**ï¼š
- âŒ ä¿®æ”¹ä»£ç  6-7 æ¬¡
- âŒ é‡æ–°æ‰“åŒ… 6-7 æ¬¡
- âŒ UIæ ·å¼**å®Œå…¨æ²¡æœ‰ä»»ä½•å˜åŒ–**
- âŒ æ¯æ¬¡éƒ½ç¡®è®¤ä»£ç å·²ä¿®æ”¹ã€æ‰“åŒ…æˆåŠŸï¼Œä½†è¿è¡Œç»“æœæ€»æ˜¯æ—§æ ·å¼

**æœ€ç»ˆç»“æœ**ï¼š
- âœ… æ‰¾åˆ°æ ¹æœ¬åŸå› ï¼š**ä¿®æ”¹äº†é”™è¯¯çš„æ–‡ä»¶**
- âœ… ä¿®æ”¹æ­£ç¡®æ–‡ä»¶åï¼Œä¸€æ¬¡æˆåŠŸ
- âœ… æ€»è€—æ—¶ï¼šçº¦2å°æ—¶ï¼ˆå…¶ä¸­1.5å°æ—¶åœ¨é”™è¯¯æ–‡ä»¶ä¸Šæµªè´¹ï¼‰

---

## æ ¸å¿ƒæ–¹æ³•è®ºï¼šUIä¿®æ”¹æ— æ•ˆçš„ç³»ç»Ÿæ€§è¯Šæ–­æµç¨‹

### é˜¶æ®µ1ï¼šéªŒè¯ä¿®æ”¹æ˜¯å¦çœŸæ­£ç”Ÿæ•ˆï¼ˆæœ€ä¼˜å…ˆï¼ï¼‰

**åŸåˆ™**ï¼šåœ¨æ€€ç–‘æŠ€æœ¯é—®é¢˜ä¹‹å‰ï¼Œå…ˆæ’é™¤äººä¸ºé”™è¯¯ã€‚

#### Step 1.1: éªŒè¯æ–‡ä»¶ä¿®æ”¹å·²ä¿å­˜
```bash
# æ–¹æ³•1ï¼šæŸ¥çœ‹æ–‡ä»¶ä¿®æ”¹æ—¶é—´
ls -la config_gui.py

# æ–¹æ³•2ï¼šæŸ¥çœ‹git diff
git diff config_gui.py

# æ–¹æ³•3ï¼šç›´æ¥æ‰“å¼€æ–‡ä»¶ç¡®è®¤ä¿®æ”¹å†…å®¹
cat config_gui.py | grep "ä½ ä¿®æ”¹çš„å…³é”®ä»£ç "
```

**æ£€æŸ¥ç‚¹**ï¼š
- [ ] æ–‡ä»¶ä¿®æ”¹æ—¶é—´æ˜¯å¦æ˜¯åˆšæ‰çš„æ—¶é—´ï¼Ÿ
- [ ] `git diff` æ˜¯å¦æ˜¾ç¤ºä½ çš„ä¿®æ”¹ï¼Ÿ
- [ ] æ–‡ä»¶å†…å®¹ç¡®å®åŒ…å«ä½ çš„ä¿®æ”¹ä»£ç ï¼Ÿ

#### Step 1.2: éªŒè¯æ‰“åŒ…æ˜¯å¦åŒ…å«ä¿®æ”¹
```bash
# å…³é”®ï¼šæŸ¥çœ‹PyInstalleræ—¥å¿—ï¼Œç¡®è®¤æ–‡ä»¶è¢«é‡æ–°æ„å»º
pyinstaller Gaiya.spec | grep "Building because.*config_gui.py changed"

# è¾“å‡ºåº”åŒ…å«ï¼š
# INFO: Building because C:\...\config_gui.py changed
```

**æ£€æŸ¥ç‚¹**ï¼š
- [ ] æ‰“åŒ…æ—¥å¿—æ˜¯å¦æ˜¾ç¤º "Building because xxx.py changed"ï¼Ÿ
- [ ] å¦‚æœæ²¡æœ‰ï¼Œè¯´æ˜PyInstallerè®¤ä¸ºæ–‡ä»¶æ²¡å˜ï¼Œéœ€è¦æ¸…ç†ç¼“å­˜ï¼š
  ```bash
  rm -rf build dist
  pyinstaller Gaiya.spec
  ```

#### Step 1.3: éªŒè¯è¿è¡Œçš„æ˜¯æ–°ç‰ˆæœ¬
```bash
# æ–¹æ³•1ï¼šæ£€æŸ¥exeä¿®æ”¹æ—¶é—´
ls -la dist/*.exe

# æ–¹æ³•2ï¼šåœ¨ä»£ç ä¸­æ·»åŠ ç‰ˆæœ¬æ—¥å¿—
VERSION = "v1.4.1-payment-style-fix"
logging.info(f"Running version: {VERSION}")
```

**æ£€æŸ¥ç‚¹**ï¼š
- [ ] exeæ–‡ä»¶ä¿®æ”¹æ—¶é—´æ˜¯å¦æ˜¯åˆšæ‰æ‰“åŒ…çš„æ—¶é—´ï¼Ÿ
- [ ] è¿è¡Œæ—¶æ—¥å¿—æ˜¯å¦æ˜¾ç¤ºæ–°ç‰ˆæœ¬å·ï¼Ÿ
- [ ] æ˜¯å¦è¯¯è¿è¡Œäº†æ—§ç‰ˆæœ¬exeï¼Ÿ

---

### é˜¶æ®µ2ï¼šå®šä½ä»£ç æ‰§è¡Œè·¯å¾„ï¼ˆæ ¸å¿ƒè¯Šæ–­ï¼‰

**é—®é¢˜æ ¸å¿ƒ**ï¼šä½ ä¿®æ”¹çš„ä»£ç æ˜¯å¦çœŸçš„è¢«æ‰§è¡Œäº†ï¼Ÿ

#### Step 2.1: æœç´¢æ‰€æœ‰ç›¸å…³ä»£ç ä½ç½®

```bash
# æœç´¢å…³é”®UIæ–‡æœ¬ï¼ˆæœ€æœ‰æ•ˆï¼ï¼‰
grep -r "é€‰æ‹©æ”¯ä»˜æ–¹å¼" --include="*.py"

# è¾“å‡ºç¤ºä¾‹ï¼š
# config_gui.py:2466:    payment_title = QLabel("é€‰æ‹©æ”¯ä»˜æ–¹å¼")
# gaiya/ui/membership_ui.py:1038:  title_label = QLabel("é€‰æ‹©æ”¯ä»˜æ–¹å¼")
```

**âš ï¸ å…³é”®å‘ç°**ï¼š
- å¦‚æœæœ‰**å¤šä¸ªæ–‡ä»¶**åŒ…å«ç›¸åŒçš„UIæ–‡æœ¬
- è¯´æ˜å¯èƒ½æœ‰**å¤šä¸ªUIå®ç°**ï¼Œä½ éœ€è¦ç¡®å®šå“ªä¸ªçœŸæ­£è¢«ä½¿ç”¨

#### Step 2.2: è¿½è¸ªUIåˆ›å»ºè·¯å¾„

**æ–¹æ³•Aï¼šä»å…¥å£è¿½è¸ªï¼ˆé€‚ç”¨äºå°å‹é¡¹ç›®ï¼‰**
```python
# 1. æ‰¾åˆ°tabåˆ›å»ºé€»è¾‘
main.py â†’ ConfigWindow.__init__() â†’ tabs.addTab(..., "è´¦æˆ·")

# 2. æ‰¾åˆ°tabå†…å®¹åˆ›å»º
ConfigWindow._load_account_tab() â†’ _create_account_tab()

# 3. æ‰¾åˆ°å®é™…ä½¿ç”¨çš„æ–‡ä»¶
_create_account_tab() åœ¨ config_gui.py:2396 âœ…
```

**æ–¹æ³•Bï¼šä½¿ç”¨æ—¥å¿—è¿½è¸ªï¼ˆé€‚ç”¨äºå¤æ‚é¡¹ç›®ï¼‰**
```python
# åœ¨å¯ç–‘çš„å¤šä¸ªæ–‡ä»¶ä¸­éƒ½æ·»åŠ æ—¥å¿—
print(f"[DEBUG] Loading payment UI from {__file__}", file=sys.stderr)

# è¿è¡Œåº”ç”¨ï¼ŒæŸ¥çœ‹å“ªä¸ªæ–‡ä»¶çš„æ—¥å¿—è¢«è¾“å‡º
# è¾“å‡ºçš„é‚£ä¸ªå°±æ˜¯çœŸæ­£è¢«ä½¿ç”¨çš„æ–‡ä»¶
```

**æ–¹æ³•Cï¼šæœç´¢å‡½æ•°è°ƒç”¨å…³ç³»**
```bash
# æœç´¢è°è°ƒç”¨äº† MembershipDialogï¼ˆå¦‚æœæ˜¯ç‹¬ç«‹çª—å£ï¼‰
grep -r "MembershipDialog" --include="*.py"

# æœç´¢è°è°ƒç”¨äº† _create_account_tabï¼ˆå¦‚æœæ˜¯tabé¡µï¼‰
grep -r "_create_account_tab" --include="*.py"
```

#### Step 2.3: éªŒè¯ä»£ç è·¯å¾„

**æ·»åŠ æ–­è¨€éªŒè¯**ï¼š
```python
# åœ¨ä½ è®¤ä¸ºä¼šè¢«æ‰§è¡Œçš„ä»£ç ä½ç½®æ·»åŠ 
assert False, "å¦‚æœçœ‹åˆ°è¿™ä¸ªé”™è¯¯ï¼Œè¯´æ˜è¿™æ®µä»£ç çœŸçš„è¢«æ‰§è¡Œäº†"

# æˆ–è€…æ·»åŠ æ˜æ˜¾çš„UIå˜åŒ–
alipay_radio.setText("ã€æµ‹è¯•ç‰ˆæœ¬ã€‘æ”¯ä»˜å®")  # å¦‚æœUIæ˜¾ç¤ºè¿™ä¸ªæ–‡æœ¬ï¼Œè¯´æ˜ä»£ç ç”Ÿæ•ˆ
```

---

### é˜¶æ®µ3ï¼šå‚è€ƒæˆåŠŸæ¡ˆä¾‹ï¼ˆå¿«é€Ÿè§£å†³ï¼‰

**åŸåˆ™**ï¼šå¦‚æœé¡¹ç›®ä¸­æœ‰ç±»ä¼¼åŠŸèƒ½å·²ç»æˆåŠŸå®ç°ï¼Œç›´æ¥å¤ç”¨å…¶æ–¹æ³•ã€‚

#### Step 3.1: è¯†åˆ«ç±»ä¼¼åŠŸèƒ½

åœ¨æœ¬æ¡ˆä¾‹ä¸­ï¼š
- âœ… **å¥—é¤å¡ç‰‡**çš„é€‰ä¸­è¾¹æ¡†æ ·å¼å·²ç»å®Œç¾å®ç°ï¼ˆæ— é»‘è‰²è¾¹æ¡†ï¼‰
- âŒ **æ”¯ä»˜æ–¹å¼å•é€‰æŒ‰é’®**çš„è¾¹æ¡†æ ·å¼æœ‰é—®é¢˜ï¼ˆæœ‰å¤–æè¾¹ï¼‰
- **ç»“è®º**ï¼šå¯ä»¥å‚è€ƒå¥—é¤å¡ç‰‡çš„å®ç°æ–¹æ³•

#### Step 3.2: å¯¹æ¯”ä»£ç å·®å¼‚

```bash
# æœç´¢å¥—é¤å¡ç‰‡çš„æ ·å¼å®ç°
grep -A 20 "class.*CardWidget" gaiya/ui/membership_ui.py

# å‘ç°å…³é”®ä»£ç ï¼š
# setFocusPolicy(Qt.FocusPolicy.NoFocus)
# setAttribute(Qt.WidgetAttribute.WA_NoSystemBackground, True)
# setAutoFillBackground(False)
```

#### Step 3.3: åº”ç”¨æˆåŠŸæ–¹æ¡ˆ

```python
# åœ¨å•é€‰æŒ‰é’®ä¸Šåº”ç”¨ç›¸åŒçš„ä¿®å¤æ–¹æ³•
alipay_radio.setFocusPolicy(Qt.FocusPolicy.NoFocus)
alipay_radio.setAttribute(Qt.WidgetAttribute.WA_NoSystemBackground, True)
alipay_radio.setAutoFillBackground(False)
```

**âœ… ç»“æœ**ï¼šç«‹å³ç”Ÿæ•ˆï¼

---

## æœ¬æ¡ˆä¾‹çš„å®Œæ•´è¯Šæ–­è¿‡ç¨‹å›é¡¾

### æ—¶é—´çº¿

| å°è¯•æ¬¡æ•° | ä¿®æ”¹å†…å®¹ | æ–‡ä»¶ | ç»“æœ | è€—æ—¶ |
|---------|---------|------|------|------|
| 1 | æ·»åŠ  `border: none` | `gaiya/ui/membership_ui.py` | âŒ æ— æ•ˆ | 15åˆ†é’Ÿ |
| 2 | å®¹å™¨èƒŒæ™¯æ”¹é€æ˜ | `gaiya/ui/membership_ui.py` | âŒ æ— æ•ˆ | 10åˆ†é’Ÿ |
| 3 | ä½¿ç”¨ `border: 0px solid transparent` | `gaiya/ui/membership_ui.py` | âŒ æ— æ•ˆ | 10åˆ†é’Ÿ |
| 4 | æ·»åŠ  `setFocusPolicy` | `gaiya/ui/membership_ui.py` | âŒ æ— æ•ˆ | 15åˆ†é’Ÿ |
| 5 | é‡æ–°æ‰“åŒ…æµ‹è¯• | `gaiya/ui/membership_ui.py` | âŒ æ— æ•ˆ | 20åˆ†é’Ÿ |
| 6 | å†æ¬¡å°è¯•å„ç§æ–¹æ³• | `gaiya/ui/membership_ui.py` | âŒ æ— æ•ˆ | 20åˆ†é’Ÿ |
| **[è½¬æŠ˜ç‚¹]** | **æœç´¢æ‰€æœ‰"é€‰æ‹©æ”¯ä»˜æ–¹å¼"** | **å‘ç°ä¸¤ä¸ªæ–‡ä»¶** | **æ‰¾åˆ°æ ¹å› ** | **5åˆ†é’Ÿ** |
| 7 | åº”ç”¨å¥—é¤å¡ç‰‡æ–¹æ³• | `config_gui.py` âœ… | âœ… **æˆåŠŸï¼** | 10åˆ†é’Ÿ |

**æ€»ç»“**ï¼š
- â±ï¸ æµªè´¹æ—¶é—´ï¼š90åˆ†é’Ÿï¼ˆåœ¨é”™è¯¯æ–‡ä»¶ä¸Šï¼‰
- âœ… æœ‰æ•ˆæ—¶é—´ï¼š15åˆ†é’Ÿï¼ˆæ‰¾åˆ°æ ¹å›  + ä¿®å¤ï¼‰
- ğŸ“Š æ•ˆç‡æ¯”ï¼š1:6

---

## æ ¹æœ¬åŸå› åˆ†æ

### ä¸ºä»€ä¹ˆä¼šä¿®æ”¹é”™è¯¯çš„æ–‡ä»¶ï¼Ÿ

#### 1. é¡¹ç›®ç»“æ„æ··æ·†

```
jindutiao/
â”œâ”€â”€ config_gui.py              # âœ… çœŸæ­£ä½¿ç”¨çš„æ–‡ä»¶ï¼ˆè€ä»£ç ï¼‰
â””â”€â”€ gaiya/
    â””â”€â”€ ui/
        â””â”€â”€ membership_ui.py   # âŒ æœªä½¿ç”¨çš„æ–‡ä»¶ï¼ˆæ–°é‡æ„ä»£ç ï¼‰
```

**èƒŒæ™¯**ï¼š
- `membership_ui.py` æ˜¯æ–°é‡æ„çš„ä¼šå‘˜UIæ¨¡å—ï¼Œè®¾è®¡æ›´ä¼˜é›…
- ä½†å®é™…é¡¹ç›®ä¸­**å°šæœªè¿ç§»**åˆ°æ–°æ¨¡å—
- `config_gui.py` ä¸­ä»åœ¨ä½¿ç”¨è€ä»£ç åˆ›å»ºè´¦æˆ·tab

#### 2. æœç´¢æ–¹æ³•ä¸å¤Ÿå…¨é¢

**é”™è¯¯åšæ³•**ï¼š
```bash
# åªæœç´¢æ–‡ä»¶å
find . -name "*membership*.py"
# ç»“æœï¼šåªæ‰¾åˆ° gaiya/ui/membership_ui.py
```

**æ­£ç¡®åšæ³•**ï¼š
```bash
# æœç´¢UIå…³é”®æ–‡æœ¬ï¼ˆæœ€å‡†ç¡®ï¼ï¼‰
grep -r "é€‰æ‹©æ”¯ä»˜æ–¹å¼" --include="*.py"
# ç»“æœï¼šæ‰¾åˆ° config_gui.py å’Œ membership_ui.py ä¸¤ä¸ªæ–‡ä»¶
```

#### 3. ç¼ºå°‘ä»£ç æ‰§è¡ŒéªŒè¯

**é”™è¯¯å‡è®¾**ï¼š
- "æˆ‘ä¿®æ”¹äº†ä»£ç  â†’ ä»£ç è‚¯å®šä¼šè¢«æ‰§è¡Œ"

**æ­£ç¡®æ€è·¯**ï¼š
- "æˆ‘ä¿®æ”¹äº†ä»£ç  â†’ éœ€è¦éªŒè¯è¿™æ®µä»£ç æ˜¯å¦çœŸçš„è¢«æ‰§è¡Œ"
- ä½¿ç”¨æ—¥å¿—ã€æ–­è¨€ã€æ˜æ˜¾UIå˜åŒ–ç­‰æ–¹æ³•éªŒè¯

---

## æ ¸å¿ƒæ–¹æ³•è®ºæ€»ç»“

### ğŸ¯ é»„é‡‘åŸåˆ™

1. **æœç´¢UIæ–‡æœ¬ > æœç´¢æ–‡ä»¶å**
   - UIæ–‡æœ¬æ˜¯å”¯ä¸€å‡†ç¡®çš„å®šä½ä¾æ®
   - æ–‡ä»¶åå¯èƒ½è¯¯å¯¼ï¼ˆå¦‚æœ¬æ¡ˆä¾‹çš„ `membership_ui.py`ï¼‰

2. **éªŒè¯æ‰§è¡Œè·¯å¾„ > ç›²ç›®ä¿®æ”¹ä»£ç **
   - å…ˆç¡®è®¤ä»£ç ä¼šè¢«æ‰§è¡Œï¼Œå†ä¿®æ”¹
   - ä½¿ç”¨æ—¥å¿—/æ–­è¨€éªŒè¯

3. **å‚è€ƒæˆåŠŸæ¡ˆä¾‹ > é‡æ–°å‘æ˜è½®å­**
   - é¡¹ç›®ä¸­å·²æœ‰çš„æˆåŠŸå®ç°æ˜¯æœ€ä½³èŒƒä¾‹
   - ç›´æ¥å¤ç”¨ï¼Œé¿å…è¸©å‘

4. **å¢é‡éªŒè¯ > æ‰¹é‡ä¿®æ”¹**
   - æ¯æ¬¡åªæ”¹ä¸€ä¸ªåœ°æ–¹ï¼Œç«‹å³æµ‹è¯•
   - é¿å…åŒæ—¶ä¿®æ”¹å¤šä¸ªæ–‡ä»¶å¯¼è‡´æ— æ³•å®šä½é—®é¢˜

---

## è¯Šæ–­æµç¨‹å›¾

```mermaid
graph TD
    A[UIä¿®æ”¹æ— æ•ˆ] --> B{æ–‡ä»¶æ˜¯å¦çœŸçš„è¢«ä¿®æ”¹?}
    B -->|å¦| C[ä¿å­˜æ–‡ä»¶/é‡æ–°ç¼–è¾‘]
    B -->|æ˜¯| D{æ‰“åŒ…æ˜¯å¦åŒ…å«ä¿®æ”¹?}
    D -->|å¦| E[æ¸…ç†ç¼“å­˜/é‡æ–°æ‰“åŒ…]
    D -->|æ˜¯| F{è¿è¡Œçš„æ˜¯æ–°ç‰ˆæœ¬?}
    F -->|å¦| G[æ£€æŸ¥exeè·¯å¾„/é‡æ–°è¿è¡Œ]
    F -->|æ˜¯| H{ä¿®æ”¹çš„ä»£ç æ˜¯å¦è¢«æ‰§è¡Œ?}
    H -->|ä¸ç¡®å®š| I[æœç´¢UIæ–‡æœ¬å®šä½æ‰€æœ‰å®ç°]
    I --> J{æ˜¯å¦æœ‰å¤šä¸ªæ–‡ä»¶?}
    J -->|æ˜¯| K[è¿½è¸ªä»£ç æ‰§è¡Œè·¯å¾„]
    J -->|å¦| L[æ£€æŸ¥ä»£ç é€»è¾‘/æ¡ä»¶åˆ†æ”¯]
    K --> M[æ‰¾åˆ°çœŸæ­£ä½¿ç”¨çš„æ–‡ä»¶]
    M --> N[åœ¨æ­£ç¡®æ–‡ä»¶ä¿®æ”¹]
    H -->|ç¡®å®šè¢«æ‰§è¡Œ| O[å‚è€ƒæˆåŠŸæ¡ˆä¾‹]
    O --> P[åº”ç”¨æˆåŠŸæ–¹æ¡ˆ]
    N --> Q[âœ… ä¿®æ”¹ç”Ÿæ•ˆ]
    P --> Q
```

---

## æœ€ä½³å®è·µæ¸…å•

### å¼€å‘é˜¶æ®µ

- [ ] **ä¼˜å…ˆç”¨æºä»£ç æµ‹è¯•**ï¼š`python main.py`ï¼ˆä¿®æ”¹ç«‹å³ç”Ÿæ•ˆï¼‰
- [ ] **æ·»åŠ ç‰ˆæœ¬æ ‡è¯†**ï¼šåœ¨ä»£ç ä¸­ç»´æŠ¤ç‰ˆæœ¬å·å’Œæ—¥å¿—
- [ ] **ä½¿ç”¨æ˜æ˜¾çš„æµ‹è¯•æ ‡è®°**ï¼šå¦‚ `setText("ã€æµ‹è¯•ç‰ˆã€‘æ”¯ä»˜å®")`
- [ ] **å¢é‡ä¿®æ”¹**ï¼šä¸€æ¬¡åªæ”¹ä¸€å¤„ï¼Œç«‹å³éªŒè¯

### è¯Šæ–­é˜¶æ®µ

- [ ] **æœç´¢UIæ–‡æœ¬å®šä½ä»£ç **ï¼š`grep -r "UIæ–‡æœ¬" --include="*.py"`
- [ ] **æ£€æŸ¥æ˜¯å¦æœ‰å¤šä¸ªå®ç°**ï¼šåŒä¸€UIå¯èƒ½åœ¨å¤šä¸ªæ–‡ä»¶
- [ ] **è¿½è¸ªä»£ç è°ƒç”¨è·¯å¾„**ï¼šä»å…¥å£è¿½è¸ªåˆ°å®é™…æ‰§è¡Œ
- [ ] **æ·»åŠ æ—¥å¿—éªŒè¯æ‰§è¡Œ**ï¼š`print(f"[DEBUG] from {__file__}")`

### æ‰“åŒ…é˜¶æ®µ

- [ ] **æ¸…ç†æ—§æ–‡ä»¶**ï¼š`rm -rf build dist`
- [ ] **æ£€æŸ¥æ‰“åŒ…æ—¥å¿—**ï¼šç¡®è®¤æ–‡ä»¶è¢«é‡æ–°æ„å»º
- [ ] **éªŒè¯exeæ—¶é—´æˆ³**ï¼šç¡®è®¤æ˜¯æ–°ç”Ÿæˆçš„æ–‡ä»¶
- [ ] **è¿è¡Œåæ£€æŸ¥ç‰ˆæœ¬æ—¥å¿—**ï¼šç¡®è®¤è¿è¡Œçš„æ˜¯æ–°ç‰ˆæœ¬

---

## æ‰©å±•ï¼šPyInstalleræ‰“åŒ…åº”ç”¨å¼€å‘çš„ç‰¹æ®Šæ€§

### æ ¸å¿ƒé—®é¢˜

åœ¨ä½¿ç”¨PyInstalleræ‰“åŒ…çš„åº”ç”¨ä¸­ï¼Œ**æºä»£ç ä¿®æ”¹ä¸ä¼šè‡ªåŠ¨åæ˜ åˆ°exe**ï¼š

```
æºä»£ç ä¿®æ”¹ âœ… â†’ éœ€è¦é‡æ–°æ‰“åŒ… âš ï¸ â†’ exeæ‰ä¼šæ›´æ–° âœ…
```

è¿™å¯¼è‡´ä¸€ä¸ªå¸¸è§é”™è¯¯ï¼š
```
å¼€å‘è€…ä¿®æ”¹ä»£ç  â†’ è¿è¡Œæ—§exe â†’ é—®é¢˜ä»å­˜åœ¨ â†’ æ€€ç–‘ä¿®å¤é”™è¯¯ âŒ
```

### è§£å†³æ–¹æ¡ˆ

#### 1. å¼€å‘æœŸï¼šä¼˜å…ˆç”¨æºä»£ç 
```bash
# 90%æ—¶é—´ï¼šå¿«é€Ÿè¿­ä»£
python main.py

# 10%æ—¶é—´ï¼šéªŒè¯æ‰“åŒ…æ•ˆæœ
pyinstaller app.spec && ./dist/app.exe
```

#### 2. éªŒè¯æœŸï¼šå¼ºåˆ¶é‡æ–°æ‰“åŒ…
```bash
# æ¸…ç†æ‰€æœ‰ç¼“å­˜
rm -rf build dist __pycache__

# å…¨æ–°æ‰“åŒ…
pyinstaller app.spec
```

#### 3. å‘å¸ƒå‰ï¼šå®Œæ•´æµ‹è¯•æµç¨‹
```bash
# 1. æ¸…ç†
rm -rf build dist

# 2. æ‰“åŒ…
pyinstaller app.spec

# 3. æ£€æŸ¥
ls -la dist/*.exe

# 4. è¿è¡Œå¹¶éªŒè¯ç‰ˆæœ¬å·
./dist/app.exe  # æŸ¥çœ‹æ—¥å¿—ä¸­çš„ç‰ˆæœ¬å·
```

---

## å·¥å…·ç®±ï¼šå¸¸ç”¨è¯Šæ–­å‘½ä»¤

### æœç´¢å®šä½

```bash
# æœç´¢UIæ–‡æœ¬ï¼ˆæœ€å‡†ç¡®ï¼‰
grep -r "é€‰æ‹©æ”¯ä»˜æ–¹å¼" --include="*.py"

# æœç´¢å‡½æ•°å®šä¹‰
grep -r "def _create_account_tab" --include="*.py"

# æœç´¢ç±»å®šä¹‰
grep -r "class.*CardWidget" --include="*.py"

# æœç´¢æ ·å¼ç›¸å…³ä»£ç 
grep -r "setStyleSheet\|QRadioButton" --include="*.py"
```

### éªŒè¯ä¿®æ”¹

```bash
# æŸ¥çœ‹æ–‡ä»¶ä¿®æ”¹æ—¶é—´
ls -la config_gui.py

# æŸ¥çœ‹gitå·®å¼‚
git diff config_gui.py

# æŸ¥çœ‹æœ€è¿‘ä¿®æ”¹çš„æ–‡ä»¶
git status

# æŸ¥çœ‹exeç”Ÿæˆæ—¶é—´
ls -la dist/*.exe
```

### æ‰“åŒ…è¯Šæ–­

```bash
# æ¸…ç†å¹¶é‡æ–°æ‰“åŒ…
rm -rf build dist && pyinstaller app.spec

# æŸ¥çœ‹æ‰“åŒ…æ—¥å¿—ï¼ˆç­›é€‰å…³é”®ä¿¡æ¯ï¼‰
pyinstaller app.spec | grep "Building because"

# éªŒè¯exeå†…å®¹ï¼ˆé«˜çº§ï¼‰
python -c "import PyInstaller.utils.hooks; print(PyInstaller.utils.hooks.collect_all('your_module'))"
```

---

## æ¡ˆä¾‹å¯ç¤ºå½•

### âš ï¸ å¸¸è§è¯¯åŒº

1. **è¯¯åŒº1**ï¼šæ–‡ä»¶åçœ‹èµ·æ¥å¯¹ â†’ å°±æ˜¯å¯¹çš„æ–‡ä»¶
   - **çœŸç›¸**ï¼šå¿…é¡»è¿½è¸ªæ‰§è¡Œè·¯å¾„ï¼Œè€Œä¸æ˜¯çŒœæµ‹

2. **è¯¯åŒº2**ï¼šä»£ç æ”¹äº† â†’ ä¸€å®šä¼šç”Ÿæ•ˆ
   - **çœŸç›¸**ï¼šPyInstalleréœ€è¦é‡æ–°æ‰“åŒ…ï¼Œä¸”å¿…é¡»è¿è¡Œæ–°exe

3. **è¯¯åŒº3**ï¼šæ‰“åŒ…æˆåŠŸ â†’ ä¿®æ”¹å·²åŒ…å«
   - **çœŸç›¸**ï¼šéœ€è¦æ£€æŸ¥æ—¥å¿—ï¼Œç¡®è®¤æ–‡ä»¶è¢«é‡æ–°æ„å»º

4. **è¯¯åŒº4**ï¼šæ ·å¼ä¸å˜ â†’ æŠ€æœ¯é—®é¢˜
   - **çœŸç›¸**ï¼š90%æ˜¯äººä¸ºé”™è¯¯ï¼ˆæ”¹é”™æ–‡ä»¶ã€è¿è¡Œæ—§ç‰ˆæœ¬ç­‰ï¼‰

### âœ… æˆåŠŸè¦è¯€

1. **æ€€ç–‘ç²¾ç¥**ï¼šæ°¸è¿œéªŒè¯ï¼Œä¸è¦å‡è®¾
2. **ç³»ç»Ÿæ€ç»´**ï¼šè¿½è¸ªå®Œæ•´è·¯å¾„ï¼Œä¸è¦å­¤ç«‹çœ‹é—®é¢˜
3. **å‚è€ƒæ ‡æ†**ï¼šå¤ç”¨æˆåŠŸæ¡ˆä¾‹ï¼Œä¸è¦é‡æ–°å‘æ˜
4. **å¢é‡éªŒè¯**ï¼šå°æ­¥å¿«è·‘ï¼Œç«‹å³åé¦ˆ

---

## æ€»ç»“

è¿™æ¬¡æ¡ˆä¾‹æœ€å¤§çš„æ•™è®­æ˜¯ï¼š

> **åœ¨å¤æ‚é¡¹ç›®ä¸­ï¼Œå®šä½é—®é¢˜çš„æ—¶é—´å¾€å¾€è¿œè¶…è§£å†³é—®é¢˜çš„æ—¶é—´ã€‚**

- å®šä½é—®é¢˜ï¼š90åˆ†é’Ÿï¼ˆæœç´¢æ­£ç¡®æ–‡ä»¶ï¼‰
- è§£å†³é—®é¢˜ï¼š10åˆ†é’Ÿï¼ˆåº”ç”¨æˆåŠŸæ–¹æ¡ˆï¼‰

**æ ¸å¿ƒæ–¹æ³•è®º**ï¼š
1. ğŸ” **æœç´¢UIæ–‡æœ¬** â†’ æ‰¾åˆ°æ‰€æœ‰ç›¸å…³æ–‡ä»¶
2. ğŸ›¤ï¸ **è¿½è¸ªæ‰§è¡Œè·¯å¾„** â†’ ç¡®å®šçœŸæ­£ä½¿ç”¨çš„æ–‡ä»¶
3. âœ… **éªŒè¯ä¿®æ”¹ç”Ÿæ•ˆ** â†’ æ·»åŠ æ—¥å¿—/æ–­è¨€/æ˜æ˜¾æ ‡è®°
4. ğŸ“š **å‚è€ƒæˆåŠŸæ¡ˆä¾‹** â†’ å¤ç”¨å·²éªŒè¯çš„æ–¹æ¡ˆ
5. ğŸ” **å¢é‡è¿­ä»£** â†’ å°æ­¥å¿«è·‘ï¼Œç«‹å³éªŒè¯

**é€‚ç”¨åœºæ™¯**ï¼š
- âœ… UIæ ·å¼ä¿®æ”¹æ— æ•ˆ
- âœ… ä»£ç ä¿®æ”¹ä¸ç”Ÿæ•ˆ
- âœ… æ‰“åŒ…ååŠŸèƒ½å¼‚å¸¸
- âœ… å¤šæ–‡ä»¶é¡¹ç›®ä»£ç å®šä½

**å·¥å…·éœ€æ±‚**ï¼š
- `grep` - æœç´¢ä»£ç 
- `git diff` - éªŒè¯ä¿®æ”¹
- `ls -la` - æ£€æŸ¥æ—¶é—´æˆ³
- PyInstalleræ—¥å¿— - ç¡®è®¤æ„å»º

---

## é™„å½•ï¼šå®Œæ•´ä»£ç ä¿®æ”¹è®°å½•

### æœ€ç»ˆæˆåŠŸçš„ä¿®æ”¹ï¼ˆconfig_gui.py:2484-2544ï¼‰

```python
# æ”¯ä»˜å®å•é€‰æŒ‰é’®
alipay_radio = QRadioButton("æ”¯ä»˜å®")
alipay_radio.setProperty("pay_type", "alipay")
alipay_radio.setChecked(True)

# âš ï¸ å…³é”®ä¿®å¤ï¼šç¦ç”¨ç„¦ç‚¹ç­–ç•¥ï¼Œé˜²æ­¢Windowsç»˜åˆ¶ç„¦ç‚¹æ¡†
alipay_radio.setFocusPolicy(Qt.FocusPolicy.NoFocus)

# âš ï¸ åº•å±‚ä¿®å¤ï¼šä½¿ç”¨Qtå±æ€§å®Œå…¨ç¦ç”¨ç³»ç»Ÿé»˜è®¤ç»˜åˆ¶
alipay_radio.setAttribute(Qt.WidgetAttribute.WA_NoSystemBackground, True)
alipay_radio.setAutoFillBackground(False)

alipay_radio.setStyleSheet("""
    QRadioButton {
        color: white;
        font-size: 14px;
        spacing: 8px;
        background: transparent;
        border: none;
        outline: none;
    }
    QRadioButton::indicator {
        width: 20px;
        height: 20px;
        border: none;
        outline: none;
    }
    QRadioButton::indicator:checked {
        background-color: #00b8a9;  /* é’è‰²ï¼Œç¬¦åˆåº”ç”¨ä¸»é¢˜ */
        border: none;
        border-radius: 10px;
    }
    QRadioButton::indicator:unchecked {
        background-color: rgba(255, 255, 255, 0.08);
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-radius: 10px;
    }
    QRadioButton::indicator:hover:unchecked {
        background-color: rgba(255, 255, 255, 0.12);
        border: 1px solid rgba(255, 255, 255, 0.25);
    }
    QRadioButton:focus {
        border: none;
        outline: none;
    }
""")
```

### å…³é”®æ”¹è¿›ç‚¹

1. **ä½¿ç”¨Qtåº•å±‚APIç¦ç”¨ç„¦ç‚¹æ¡†**ï¼ˆå‚è€ƒå¥—é¤å¡ç‰‡æ–¹æ¡ˆï¼‰
2. **é…è‰²ç¬¦åˆåº”ç”¨ä¸»é¢˜**ï¼ˆé’è‰² #00b8a9ï¼‰
3. **å®Œæ•´çš„æ ·å¼è¦†ç›–**ï¼ˆåŒ…æ‹¬hoverçŠ¶æ€ï¼‰
4. **é—´è·ä¼˜åŒ–**ï¼ˆå®¹å™¨å†…è¾¹è·60pxï¼ŒæŒ‰é’®é—´è·20pxï¼‰

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0
**åˆ›å»ºæ—¶é—´**ï¼š2025-11-07
**é€‚ç”¨é¡¹ç›®**ï¼šPyInstalleræ‰“åŒ…çš„PySide6/PyQtåº”ç”¨
**ç»´æŠ¤è€…**ï¼šClaude Code
